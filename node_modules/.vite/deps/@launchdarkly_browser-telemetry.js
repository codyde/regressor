import {
  __commonJS
} from "./chunk-G3PMV62Z.js";

// browser-external:worker_threads
var require_worker_threads = __commonJS({
  "browser-external:worker_threads"(exports, module2) {
    module2.exports = Object.create(new Proxy({}, {
      get(_2, key) {
        if (key !== "__esModule" && key !== "__proto__" && key !== "constructor" && key !== "splice") {
          console.warn(`Module "worker_threads" has been externalized for browser compatibility. Cannot access "worker_threads.${key}" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`);
        }
      }
    }));
  }
});

// node_modules/@launchdarkly/browser-telemetry/dist/esm/bundle.es.js
var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function t(e2) {
  return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2.default : e2;
}
var n = { exports: {} };
!function(t2) {
  !function(e2) {
    if (e2) {
      var n2 = {}, r2 = e2.TraceKit, o2 = [].slice, s2 = "?", i2 = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;
      n2.noConflict = function() {
        return e2.TraceKit = r2, n2;
      }, n2.wrap = function(e3) {
        return function() {
          try {
            return e3.apply(this, arguments);
          } catch (e4) {
            throw n2.report(e4), e4;
          }
        };
      }, n2.report = function() {
        var t3, r3, o3, s3, l3 = [], c2 = null, u2 = null;
        function d2(e3, t4, r4) {
          var o4 = null;
          if (!t4 || n2.collectWindowErrors) {
            for (var s4 in l3) if (a2(l3, s4)) try {
              l3[s4](e3, t4, r4);
            } catch (e4) {
              o4 = e4;
            }
            if (o4) throw o4;
          }
        }
        function h2(e3, r4, o4, s4, a3) {
          if (u2) n2.computeStackTrace.augmentStackTraceWithInitialElement(u2, r4, o4, e3), m2();
          else if (a3) d2(n2.computeStackTrace(a3), true, a3);
          else {
            var l4, c3 = { url: r4, line: o4, column: s4 }, h3 = e3;
            if ("[object String]" === {}.toString.call(e3)) {
              var p3 = e3.match(i2);
              p3 && (l4 = p3[1], h3 = p3[2]);
            }
            c3.func = n2.computeStackTrace.guessFunctionName(c3.url, c3.line), c3.context = n2.computeStackTrace.gatherContext(c3.url, c3.line), d2({ name: l4, message: h3, mode: "onerror", stack: [c3] }, true, null);
          }
          return !!t3 && t3.apply(this, arguments);
        }
        function p2(e3) {
          d2(n2.computeStackTrace(e3.reason), true, e3.reason);
        }
        function m2() {
          var e3 = u2, t4 = c2;
          u2 = null, c2 = null, d2(e3, false, t4);
        }
        function g2(e3) {
          if (u2) {
            if (c2 === e3) return;
            m2();
          }
          var t4 = n2.computeStackTrace(e3);
          throw u2 = t4, c2 = e3, setTimeout(function() {
            c2 === e3 && m2();
          }, t4.incomplete ? 2e3 : 0), e3;
        }
        return g2.subscribe = function(n3) {
          !function() {
            if (true === r3) return;
            t3 = e2.onerror, e2.onerror = h2, r3 = true;
          }(), function() {
            if (true === s3) return;
            o3 = e2.onunhandledrejection, e2.onunhandledrejection = p2, s3 = true;
          }(), l3.push(n3);
        }, g2.unsubscribe = function(n3) {
          for (var i3 = l3.length - 1; i3 >= 0; --i3) l3[i3] === n3 && l3.splice(i3, 1);
          0 === l3.length && (r3 && (e2.onerror = t3, r3 = false), s3 && (e2.onunhandledrejection = o3, s3 = false));
        }, g2;
      }(), n2.computeStackTrace = function() {
        var t3 = {};
        function r3(r4) {
          if ("string" != typeof r4) return [];
          if (!a2(t3, r4)) {
            var o4 = "", s3 = "";
            try {
              s3 = e2.document.domain;
            } catch (e3) {
            }
            var i4 = /(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r4);
            i4 && i4[2] === s3 && (o4 = function(t4) {
              if (!n2.remoteFetching) return "";
              try {
                var r5 = function() {
                  try {
                    return new e2.XMLHttpRequest();
                  } catch (t5) {
                    return new e2.ActiveXObject("Microsoft.XMLHTTP");
                  }
                }();
                return r5.open("GET", t4, false), r5.send(""), r5.responseText;
              } catch (e3) {
                return "";
              }
            }(r4)), t3[r4] = o4 ? o4.split("\n") : [];
          }
          return t3[r4];
        }
        function o3(e3, t4) {
          var n3, o4 = /function ([^(]*)\(([^)]*)\)/, i4 = /['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/, a3 = "", c3 = r3(e3);
          if (!c3.length) return s2;
          for (var u3 = 0; u3 < 10; ++u3) if (!l2(a3 = c3[t4 - u3] + a3)) {
            if (n3 = i4.exec(a3)) return n3[1];
            if (n3 = o4.exec(a3)) return n3[1];
          }
          return s2;
        }
        function i3(e3, t4) {
          var o4 = r3(e3);
          if (!o4.length) return null;
          var s3 = [], i4 = Math.floor(n2.linesOfContext / 2), a3 = i4 + n2.linesOfContext % 2, c3 = Math.max(0, t4 - i4 - 1), u3 = Math.min(o4.length, t4 + a3 - 1);
          t4 -= 1;
          for (var d3 = c3; d3 < u3; ++d3) l2(o4[d3]) || s3.push(o4[d3]);
          return s3.length > 0 ? s3 : null;
        }
        function c2(e3) {
          return e3.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g, "\\$&");
        }
        function u2(e3) {
          return c2(e3).replace("<", "(?:<|&lt;)").replace(">", "(?:>|&gt;)").replace("&", "(?:&|&amp;)").replace('"', '(?:"|&quot;)').replace(/\s+/g, "\\s+");
        }
        function d2(e3, t4) {
          for (var n3, o4, s3 = 0, i4 = t4.length; s3 < i4; ++s3) if ((n3 = r3(t4[s3])).length && (n3 = n3.join("\n"), o4 = e3.exec(n3))) return { url: t4[s3], line: n3.substring(0, o4.index).split("\n").length, column: o4.index - n3.lastIndexOf("\n", o4.index) - 1 };
          return null;
        }
        function h2(e3, t4, n3) {
          var o4, s3 = r3(t4), i4 = new RegExp("\\b" + c2(e3) + "\\b");
          return n3 -= 1, s3 && s3.length > n3 && (o4 = i4.exec(s3[n3])) ? o4.index : null;
        }
        function p2(t4) {
          if (!l2(e2 && e2.document)) {
            for (var n3, r4, o4, s3, i4 = [e2.location.href], a3 = e2.document.getElementsByTagName("script"), h3 = "" + t4, p3 = 0; p3 < a3.length; ++p3) {
              var m3 = a3[p3];
              m3.src && i4.push(m3.src);
            }
            if (o4 = /^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h3)) {
              var g3 = o4[1] ? "\\s+" + o4[1] : "", f3 = o4[2].split(",").join("\\s*,\\s*");
              n3 = c2(o4[3]).replace(/;$/, ";?"), r4 = new RegExp("function" + g3 + "\\s*\\(\\s*" + f3 + "\\s*\\)\\s*{\\s*" + n3 + "\\s*}");
            } else r4 = new RegExp(c2(h3).replace(/\s+/g, "\\s+"));
            if (s3 = d2(r4, i4)) return s3;
            if (o4 = /^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h3)) {
              var I3 = o4[1];
              if (n3 = u2(o4[2]), s3 = d2(r4 = new RegExp("on" + I3 + `=[\\'"]\\s*` + n3 + `\\s*[\\'"]`, "i"), i4[0])) return s3;
              if (s3 = d2(r4 = new RegExp(n3), i4)) return s3;
            }
            return null;
          }
        }
        function m2(e3) {
          if (!e3.stack) return null;
          for (var t4, n3, r4, a3 = /^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, c3 = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i, u3 = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, d3 = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, p3 = /\((\S*)(?::(\d+))(?::(\d+))\)/, m3 = e3.stack.split("\n"), g3 = [], f3 = /^(.*) is undefined$/.exec(e3.message), I3 = 0, C2 = m3.length; I3 < C2; ++I3) {
            if (n3 = a3.exec(m3[I3])) {
              var y2 = n3[2] && 0 === n3[2].indexOf("native");
              n3[2] && 0 === n3[2].indexOf("eval") && (t4 = p3.exec(n3[2])) && (n3[2] = t4[1], n3[3] = t4[2], n3[4] = t4[3]), r4 = { url: y2 ? null : n3[2], func: n3[1] || s2, args: y2 ? [n3[2]] : [], line: n3[3] ? +n3[3] : null, column: n3[4] ? +n3[4] : null };
            } else if (n3 = u3.exec(m3[I3])) r4 = { url: n3[2], func: n3[1] || s2, args: [], line: +n3[3], column: n3[4] ? +n3[4] : null };
            else {
              if (!(n3 = c3.exec(m3[I3]))) continue;
              n3[3] && n3[3].indexOf(" > eval") > -1 && (t4 = d3.exec(n3[3])) ? (n3[3] = t4[1], n3[4] = t4[2], n3[5] = null) : 0 !== I3 || n3[5] || l2(e3.columnNumber) || (g3[0].column = e3.columnNumber + 1), r4 = { url: n3[3], func: n3[1] || s2, args: n3[2] ? n3[2].split(",") : [], line: n3[4] ? +n3[4] : null, column: n3[5] ? +n3[5] : null };
            }
            !r4.func && r4.line && (r4.func = o3(r4.url, r4.line)), r4.context = r4.line ? i3(r4.url, r4.line) : null, g3.push(r4);
          }
          return g3.length ? (g3[0] && g3[0].line && !g3[0].column && f3 && (g3[0].column = h2(f3[1], g3[0].url, g3[0].line)), { mode: "stack", name: e3.name, message: e3.message, stack: g3 }) : null;
        }
        function g2(e3, t4, n3, r4) {
          var s3 = { url: t4, line: n3 };
          if (s3.url && s3.line) {
            e3.incomplete = false, s3.func || (s3.func = o3(s3.url, s3.line)), s3.context || (s3.context = i3(s3.url, s3.line));
            var a3 = / '([^']+)' /.exec(r4);
            if (a3 && (s3.column = h2(a3[1], s3.url, s3.line)), e3.stack.length > 0 && e3.stack[0].url === s3.url) {
              if (e3.stack[0].line === s3.line) return false;
              if (!e3.stack[0].line && e3.stack[0].func === s3.func) return e3.stack[0].line = s3.line, e3.stack[0].context = s3.context, false;
            }
            return e3.stack.unshift(s3), e3.partial = true, true;
          }
          return e3.incomplete = true, false;
        }
        function f2(e3, t4) {
          for (var r4, i4, a3, l3 = /function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i, c3 = [], u3 = {}, d3 = false, m3 = f2.caller; m3 && !d3; m3 = m3.caller) if (m3 !== I2 && m3 !== n2.report) {
            if (i4 = { url: null, func: s2, args: [], line: null, column: null }, m3.name ? i4.func = m3.name : (r4 = l3.exec(m3.toString())) && (i4.func = r4[1]), void 0 === i4.func) try {
              i4.func = r4.input.substring(0, r4.input.indexOf("{"));
            } catch (e4) {
            }
            if (a3 = p2(m3)) {
              i4.url = a3.url, i4.line = a3.line, i4.func === s2 && (i4.func = o3(i4.url, i4.line));
              var C2 = / '([^']+)' /.exec(e3.message || e3.description);
              C2 && (i4.column = h2(C2[1], a3.url, a3.line));
            }
            u3["" + m3] ? d3 = true : u3["" + m3] = true, c3.push(i4);
          }
          t4 && c3.splice(0, t4);
          var y2 = { mode: "callers", name: e3.name, message: e3.message, stack: c3 };
          return g2(y2, e3.sourceURL || e3.fileName, e3.line || e3.lineNumber, e3.message || e3.description), y2;
        }
        function I2(t4, n3) {
          var s3 = null;
          n3 = null == n3 ? 0 : +n3;
          try {
            if (s3 = function(e3) {
              var t5 = e3.stacktrace;
              if (t5) {
                for (var n4, r4 = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i, s4 = / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i, a3 = t5.split("\n"), l3 = [], c3 = 0; c3 < a3.length; c3 += 2) {
                  var u3 = null;
                  if ((n4 = r4.exec(a3[c3])) ? u3 = { url: n4[2], line: +n4[1], column: null, func: n4[3], args: [] } : (n4 = s4.exec(a3[c3])) && (u3 = { url: n4[6], line: +n4[1], column: +n4[2], func: n4[3] || n4[4], args: n4[5] ? n4[5].split(",") : [] }), u3) {
                    if (!u3.func && u3.line && (u3.func = o3(u3.url, u3.line)), u3.line) try {
                      u3.context = i3(u3.url, u3.line);
                    } catch (e4) {
                    }
                    u3.context || (u3.context = [a3[c3 + 1]]), l3.push(u3);
                  }
                }
                return l3.length ? { mode: "stacktrace", name: e3.name, message: e3.message, stack: l3 } : null;
              }
            }(t4), s3) return s3;
          } catch (e3) {
          }
          try {
            if (s3 = m2(t4)) return s3;
          } catch (e3) {
          }
          try {
            if (s3 = function(t5) {
              var n4 = t5.message.split("\n");
              if (n4.length < 4) return null;
              var s4, l3 = /^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i, c3 = /^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i, h3 = /^\s*Line (\d+) of function script\s*$/i, p3 = [], m3 = e2 && e2.document && e2.document.getElementsByTagName("script"), g3 = [];
              for (var f3 in m3) a2(m3, f3) && !m3[f3].src && g3.push(m3[f3]);
              for (var I3 = 2; I3 < n4.length; I3 += 2) {
                var C2 = null;
                if (s4 = l3.exec(n4[I3])) C2 = { url: s4[2], func: s4[3], args: [], line: +s4[1], column: null };
                else if (s4 = c3.exec(n4[I3])) {
                  C2 = { url: s4[3], func: s4[4], args: [], line: +s4[1], column: null };
                  var y2 = +s4[1], v2 = g3[s4[2] - 1];
                  if (v2) {
                    var b2 = r3(C2.url);
                    if (b2) {
                      var S2 = (b2 = b2.join("\n")).indexOf(v2.innerText);
                      S2 >= 0 && (C2.line = y2 + b2.substring(0, S2).split("\n").length);
                    }
                  }
                } else if (s4 = h3.exec(n4[I3])) {
                  var A2 = e2.location.href.replace(/#.*$/, ""), k2 = d2(new RegExp(u2(n4[I3 + 1])), [A2]);
                  C2 = { url: A2, func: "", args: [], line: k2 ? k2.line : s4[1], column: null };
                }
                if (C2) {
                  C2.func || (C2.func = o3(C2.url, C2.line));
                  var w2 = i3(C2.url, C2.line), M2 = w2 ? w2[Math.floor(w2.length / 2)] : null;
                  w2 && M2.replace(/^\s*/, "") === n4[I3 + 1].replace(/^\s*/, "") ? C2.context = w2 : C2.context = [n4[I3 + 1]], p3.push(C2);
                }
              }
              return p3.length ? { mode: "multiline", name: t5.name, message: n4[0], stack: p3 } : null;
            }(t4), s3) return s3;
          } catch (e3) {
          }
          try {
            if (s3 = f2(t4, n3 + 1)) return s3;
          } catch (e3) {
          }
          return { name: t4.name, message: t4.message, mode: "failed" };
        }
        return I2.augmentStackTraceWithInitialElement = g2, I2.computeStackTraceFromStackProp = m2, I2.guessFunctionName = o3, I2.gatherContext = i3, I2.ofCaller = function(e3) {
          e3 = 1 + (null == e3 ? 0 : +e3);
          try {
            throw new Error();
          } catch (t4) {
            return I2(t4, e3 + 1);
          }
        }, I2.getSource = r3, I2;
      }(), n2.extendToAsynchronousCallbacks = function() {
        var t3 = function(t4) {
          var r3 = e2[t4];
          e2[t4] = function() {
            var e3 = o2.call(arguments), t5 = e3[0];
            return "function" == typeof t5 && (e3[0] = n2.wrap(t5)), r3.apply ? r3.apply(this, e3) : r3(e3[0], e3[1]);
          };
        };
        t3("setTimeout"), t3("setInterval");
      }, n2.remoteFetching || (n2.remoteFetching = true), n2.collectWindowErrors || (n2.collectWindowErrors = true), (!n2.linesOfContext || n2.linesOfContext < 1) && (n2.linesOfContext = 11), t2.exports && e2.module !== t2 ? t2.exports = n2 : e2.TraceKit = n2;
    }
    function a2(e3, t3) {
      return Object.prototype.hasOwnProperty.call(e3, t3);
    }
    function l2(e3) {
      return void 0 === e3;
    }
  }("undefined" != typeof window ? window : e);
}(n);
var r = n.exports;
var o = t(r);
function s(e2) {
  try {
    return e2.target;
  } catch (e3) {
    return;
  }
}
function i(e2) {
  return "object" == typeof e2 && null != e2 && e2.parentNode;
}
function a(e2) {
  if (!e2.tagName) return "";
  const t2 = [];
  t2.push(e2.tagName.toLowerCase()), e2.id && t2.push(`#${e2.id}`);
  const n2 = function(e3) {
    if ("string" != typeof e3.className) return;
    let t3 = e3.className;
    return e3.className.includes(" ") && (t3 = e3.className.replace(" ", ".")), "" !== t3 ? `.${t3}` : void 0;
  }(e2);
  return n2 && t2.push(n2), t2.join("");
}
function l(e2, t2 = { maxDepth: 10 }) {
  const n2 = [];
  let r2 = e2;
  for (; i(r2) && r2.parentNode && n2.length < t2.maxDepth; ) {
    const e3 = a(r2);
    if ("html" === e3) break;
    n2.push(e3), r2 = r2.parentNode;
  }
  return n2.reverse().join(" > ");
}
var c = class {
  constructor() {
    window.addEventListener("click", (e2) => {
      var t2;
      const n2 = s(e2);
      if (n2) {
        const e3 = { class: "ui", type: "click", level: "info", timestamp: Date.now(), message: l(n2) };
        null === (t2 = this.destination) || void 0 === t2 || t2.addBreadcrumb(e3);
      }
    }, true);
  }
  register(e2, t2) {
    this.destination = e2;
  }
  unregister() {
    this.destination = void 0;
  }
};
var u = ["INPUT", "TEXTAREA"];
var d = class {
  constructor() {
    window.addEventListener("keypress", (e2) => {
      var t2;
      const n2 = s(e2), r2 = n2;
      if (n2 && (u.includes(n2.tagName) || (null == r2 ? void 0 : r2.isContentEditable))) {
        const e3 = { class: "ui", type: "input", level: "info", timestamp: Date.now(), message: l(n2) };
        this.shouldDeduplicate(e3) || (null === (t2 = this.destination) || void 0 === t2 || t2.addBreadcrumb(e3), this.lastEvent = e3);
      }
    }, true);
  }
  register(e2, t2) {
    this.destination = e2;
  }
  unregister() {
    this.destination = void 0;
  }
  shouldDeduplicate(e2) {
    if (this.lastEvent) {
      const t2 = Math.abs(e2.timestamp - this.lastEvent.timestamp);
      return this.lastEvent.message === e2.message && t2 <= 1e3;
    }
    return false;
  }
};
var h = class {
  constructor() {
    window.addEventListener("error", (e2) => {
      var t2;
      null === (t2 = this.destination) || void 0 === t2 || t2.captureErrorEvent(e2);
    }, true), window.addEventListener("unhandledrejection", (e2) => {
      var t2;
      e2.reason && (null === (t2 = this.destination) || void 0 === t2 || t2.captureError(e2.reason));
    }, true);
  }
  register(e2) {
    this.destination = e2;
  }
  unregister() {
    this.destination = void 0;
  }
};
function p(e2, t2) {
  var n2, r2, o2;
  (null === (n2 = e2.data) || void 0 === n2 ? void 0 : n2.url) && (e2.data.url = (r2 = t2.urlFilters, (o2 = e2.data.url) ? r2.reduce((e3, t3) => t3(e3), o2) : ""));
}
var m = window.fetch;
function g(e2, t2) {
  var n2;
  let r2 = "", o2 = "GET";
  return "string" == typeof e2 && (r2 = e2), e2 instanceof Request && (r2 = e2.url), e2 instanceof URL && (r2 = e2.toString()), t2 && (o2 = null !== (n2 = t2.method) && void 0 !== n2 ? n2 : o2), { url: r2, method: o2 };
}
var f = class {
  constructor(e2) {
    !function(e3) {
      function t2(...t3) {
        const n2 = Date.now();
        return m.apply(this, t3).then((r2) => {
          const o2 = { class: "http", timestamp: n2, level: r2.ok ? "info" : "error", type: "fetch", data: Object.assign(Object.assign({}, g(t3[0], t3[1])), { statusCode: r2.status, statusText: r2.statusText }) };
          return e3(o2), r2;
        });
      }
      t2.prototype = m.prototype;
      try {
        Object.defineProperty(t2, "__LaunchDarkly_original_fetch", { value: m, writable: true, configurable: true });
      } catch (e4) {
      }
      window.fetch = t2;
    }((t2) => {
      var n2;
      p(t2, e2), null === (n2 = this.destination) || void 0 === n2 || n2.addBreadcrumb(t2);
    });
  }
  register(e2, t2) {
    this.destination = e2;
  }
  unregister() {
    this.destination = void 0;
  }
};
var I = "__LaunchDarkly_original_xhr";
var C = `${I}_open`;
var y = `${I}_send`;
var v = "__LaunchDarkly_data_xhr";
var b = window.XMLHttpRequest.prototype.open;
var S = window.XMLHttpRequest.prototype.send;
var A = class {
  constructor(e2) {
    !function(e3) {
      window.XMLHttpRequest.prototype.open = function(...t2) {
        this.addEventListener("error", function(e4) {
          this[v].error = true;
        }), this.addEventListener("loadend", function(t3) {
          const n2 = this[v];
          n2 && n2.timestamp && e3({ class: "http", timestamp: n2.timestamp, level: n2.error ? "error" : "info", type: "xhr", data: { url: n2.url, method: n2.method, statusCode: this.status, statusText: this.statusText } });
        }, true), b.apply(this, t2);
        try {
          const e4 = { method: null == t2 ? void 0 : t2[0], url: null == t2 ? void 0 : t2[1] };
          Object.defineProperty(this, v, { value: e4, writable: true, configurable: true });
        } catch (e4) {
        }
      }, window.XMLHttpRequest.prototype.send = function(...e4) {
        S.apply(this, e4);
        const t2 = this[v];
        t2 && (t2.timestamp = Date.now());
      };
      try {
        Object.defineProperties(window.XMLHttpRequest, { [C]: { value: b, writable: true, configurable: true }, [y]: { value: S, writable: true, configurable: true } });
      } catch (e4) {
      }
    }((t2) => {
      var n2;
      p(t2, e2), null === (n2 = this.destination) || void 0 === n2 || n2.addBreadcrumb(t2);
    });
  }
  register(e2, t2) {
    this.destination = e2;
  }
  unregister() {
    this.destination = void 0;
  }
};
var k = /sdk\/evalx\/[^/]+\/contexts\/(?<context>[^/?]*)\??.*?/;
var w = /\/eval\/[^/]+\/(?<context>[^/?]*)\??.*?/;
function M(e2) {
  var t2, n2;
  if (e2.includes("/sdk/evalx")) {
    const n3 = e2.match(k), r2 = null === (t2 = null == n3 ? void 0 : n3.groups) || void 0 === t2 ? void 0 : t2.context;
    if (r2) return e2.replace(r2, "*".repeat(r2.length));
  }
  if (e2.includes("/eval/")) {
    const t3 = e2.match(w), r2 = null === (n2 = null == t3 ? void 0 : t3.groups) || void 0 === n2 ? void 0 : n2.context;
    if (r2) return e2.replace(r2, "*".repeat(r2.length));
  }
  return e2;
}
var x = { start: 0, end: 3 };
var T = { start: 4, end: 5 };
var E = { start: 6, end: 7 };
var N = { start: 8, end: 8 };
var R = { start: 9, end: 9 };
var F = { start: 10, end: 15 };
function O(e2, t2) {
  let n2 = "";
  for (let r2 = t2.start; r2 <= t2.end; r2 += 1) n2 += e2[r2].toString(16).padStart(2, "0");
  return n2;
}
function L() {
  return function(e2) {
    return e2[N.start] = 191 & e2[N.start] | 128, e2[E.start] = 15 & e2[E.start] | 64, `${O(e2, x)}-${O(e2, T)}-${O(e2, E)}-${O(e2, N)}${O(e2, R)}-${O(e2, F)}`;
  }(function() {
    if (crypto && crypto.getRandomValues) {
      const e3 = new Uint8Array(16);
      return crypto.getRandomValues(e3), [...e3.values()];
    }
    const e2 = [];
    for (let t2 = 0; t2 < 16; t2 += 1) e2.push(Math.floor(256 * Math.random()));
    return e2;
  }());
}
var D = "(index)";
function B(e2, t2) {
  let n2 = e2;
  return e2.startsWith(t2) && (n2 = e2.slice(t2.length), n2.startsWith("/") && (n2 = n2.slice(1)), "" === n2 && (n2 = D), n2.endsWith("/") && (n2 += D)), n2;
}
function W(e2, t2, n2) {
  if (t2.length <= e2.maxLength) return t2;
  const r2 = Math.max(0, n2 - e2.beforeColumnCharacters), o2 = Math.min(t2.length, r2 + e2.maxLength);
  return t2.slice(r2, o2);
}
function U(e2, t2, n2, r2) {
  const o2 = e2 < 0 ? 0 : e2, s2 = t2 > n2.length ? n2.length : t2;
  return o2 < s2 ? n2.slice(o2, s2).map(r2) : [];
}
function Z(e2, t2) {
  const n2 = r.computeStackTrace(e2).stack.reverse().map((e3) => Object.assign({ fileName: B(e3.url, window.location.origin), function: e3.func, line: e3.line, col: e3.column }, function(e4, t3) {
    const { context: n3 } = e4;
    if (!n3) return {};
    const { maxLineLength: r2 } = t3.source, o2 = Math.floor(r2 / 2), s2 = (e5) => W({ maxLength: t3.source.maxLineLength, beforeColumnCharacters: o2 }, e5, 0), i2 = Math.floor(n3.length / 2);
    return { srcBefore: U(i2 - t3.source.beforeLines, i2, n3, s2), srcLine: W({ maxLength: r2, beforeColumnCharacters: o2 }, n3[i2], e4.column || 0), srcAfter: U(i2 + 1, i2 + 1 + t3.source.afterLines, n3, s2) };
  }(e3, t2)));
  return { frames: n2 };
}
var G = "$ld:telemetry";
var V = `${G}:error`;
var K = `${G}:sessionCapture`;
var _ = "generic";
function P(e2) {
  switch (typeof e2) {
    case "string":
    case "boolean":
    case "number":
      return e2;
    default:
      return;
  }
}
var Y = class {
  constructor(e2) {
    this.options = e2, this.pendingEvents = [], this.breadcrumbs = [], this.inspectorInstances = [], this.collectors = [], this.sessionId = void 0 !== typeof crypto && "function" == typeof crypto.randomUUID ? crypto.randomUUID() : L(), function(e3) {
      const t3 = Math.max(e3.source.afterLines, e3.source.beforeLines);
      o.linesOfContext = 2 * t3 + 1;
    }(e2.stack), this.collectors.push(new h()), this.collectors.push(...e2.collectors), this.maxPendingEvents = e2.maxPendingEvents, this.maxBreadcrumbs = e2.breadcrumbs.maxBreadcrumbs;
    const t2 = [M];
    e2.breadcrumbs.http.customUrlFilter && t2.push(e2.breadcrumbs.http.customUrlFilter), e2.breadcrumbs.http.instrumentFetch && this.collectors.push(new f({ urlFilters: t2 })), e2.breadcrumbs.http.instrumentXhr && this.collectors.push(new A({ urlFilters: t2 })), e2.breadcrumbs.click && this.collectors.push(new c()), e2.breadcrumbs.keyboardInput && this.collectors.push(new d()), this.collectors.forEach((e3) => e3.register(this, this.sessionId));
    const n2 = [];
    !function(e3, t3, n3) {
      e3.breadcrumbs.evaluations && t3.push({ type: "flag-used", name: "launchdarkly-browser-telemetry-flag-used", synchronous: true, method(e4, t4, r2) {
        n3.handleFlagUsed(e4, t4, r2);
      } }), e3.breadcrumbs.flagChange && t3.push({ type: "flag-detail-changed", name: "launchdarkly-browser-telemetry-flag-used", synchronous: true, method(e4, t4) {
        n3.handleFlagDetailChanged(e4, t4);
      } });
    }(e2, n2, this), this.inspectorInstances.push(...n2);
  }
  register(e2) {
    this.client = e2, this.pendingEvents.forEach((e3) => {
      var t2;
      null === (t2 = this.client) || void 0 === t2 || t2.track(e3.type, e3.data);
    });
  }
  inspectors() {
    return this.inspectorInstances;
  }
  capture(e2, t2) {
    var n2;
    void 0 === this.client && (this.pendingEvents.push({ type: e2, data: t2 }), this.pendingEvents.length > this.maxPendingEvents && this.pendingEvents.shift()), null === (n2 = this.client) || void 0 === n2 || n2.track(e2, t2);
  }
  captureError(e2) {
    var t2, n2;
    const r2 = null != e2 ? { type: e2.name || (null === (t2 = e2.constructor) || void 0 === t2 ? void 0 : t2.name) || _, message: null !== (n2 = e2.message) && void 0 !== n2 ? n2 : "exception had no message", stack: Z(e2, this.options.stack), breadcrumbs: [...this.breadcrumbs], sessionId: this.sessionId } : { type: _, message: "exception was null or undefined", stack: { frames: [] }, breadcrumbs: [...this.breadcrumbs], sessionId: this.sessionId };
    this.capture(V, r2), this.dispatchError(r2);
  }
  captureErrorEvent(e2) {
    this.captureError(e2.error);
  }
  captureSession(e2) {
    this.capture(K, Object.assign(Object.assign({}, e2), { breadcrumbs: [...this.breadcrumbs] }));
  }
  addBreadcrumb(e2) {
    this.breadcrumbs.push(e2), this.breadcrumbs.length > this.maxBreadcrumbs && this.breadcrumbs.shift();
  }
  close() {
    this.collectors.forEach((e2) => e2.unregister());
  }
  handleFlagUsed(e2, t2, n2) {
    const r2 = { type: "flag-evaluated", data: { key: e2, value: P(t2.value) }, timestamp: (/* @__PURE__ */ new Date()).getTime(), class: "feature-management", level: "info" };
    this.addBreadcrumb(r2), this.dispatchFlagUsed(e2, t2, n2);
  }
  handleFlagDetailChanged(e2, t2) {
    const n2 = { type: "flag-detail-changed", data: { key: e2, value: P(t2.value) }, timestamp: (/* @__PURE__ */ new Date()).getTime(), class: "feature-management", level: "info" };
    this.addBreadcrumb(n2), this.dispatchFlagDetailChanged(e2, t2);
  }
  dispatchError(e2) {
    this.collectors.forEach((t2) => {
      var n2;
      null === (n2 = t2.handleErrorEvent) || void 0 === n2 || n2.call(t2, e2.type, e2.message);
    });
  }
  dispatchFlagUsed(e2, t2, n2) {
    this.collectors.forEach((r2) => {
      var o2;
      null === (o2 = r2.handleFlagUsed) || void 0 === o2 || o2.call(r2, e2, t2, n2);
    });
  }
  dispatchFlagDetailChanged(e2, t2) {
    this.collectors.forEach((n2) => {
      var r2;
      null === (r2 = n2.handleFlagDetailChanged) || void 0 === r2 || r2.call(n2, e2, t2);
    });
  }
};
var z;
function j(e2) {
  var t2 = null == e2 ? void 0 : e2.host;
  return Boolean((null == t2 ? void 0 : t2.shadowRoot) === e2);
}
function J(e2) {
  return "[object ShadowRoot]" === Object.prototype.toString.call(e2);
}
function H(e2) {
  try {
    var t2 = e2.rules || e2.cssRules;
    return t2 ? ((n2 = Array.from(t2).map(Q).join("")).includes(" background-clip: text;") && !n2.includes(" -webkit-background-clip: text;") && (n2 = n2.replace(" background-clip: text;", " -webkit-background-clip: text; background-clip: text;")), n2) : null;
  } catch (e3) {
    return null;
  }
  var n2;
}
function Q(e2) {
  var t2 = e2.cssText;
  if (function(e3) {
    return "styleSheet" in e3;
  }(e2)) try {
    t2 = H(e2.styleSheet) || t2;
  } catch (e3) {
  }
  return t2;
}
!function(e2) {
  e2[e2.Document = 0] = "Document", e2[e2.DocumentType = 1] = "DocumentType", e2[e2.Element = 2] = "Element", e2[e2.Text = 3] = "Text", e2[e2.CDATA = 4] = "CDATA", e2[e2.Comment = 5] = "Comment";
}(z || (z = {}));
var X = function() {
  function e2() {
    this.idNodeMap = /* @__PURE__ */ new Map(), this.nodeMetaMap = /* @__PURE__ */ new WeakMap();
  }
  return e2.prototype.getId = function(e3) {
    var t2;
    if (!e3) return -1;
    var n2 = null === (t2 = this.getMeta(e3)) || void 0 === t2 ? void 0 : t2.id;
    return null != n2 ? n2 : -1;
  }, e2.prototype.getNode = function(e3) {
    return this.idNodeMap.get(e3) || null;
  }, e2.prototype.getIds = function() {
    return Array.from(this.idNodeMap.keys());
  }, e2.prototype.getMeta = function(e3) {
    return this.nodeMetaMap.get(e3) || null;
  }, e2.prototype.removeNodeFromMap = function(e3) {
    var t2 = this, n2 = this.getId(e3);
    this.idNodeMap.delete(n2), e3.childNodes && e3.childNodes.forEach(function(e4) {
      return t2.removeNodeFromMap(e4);
    });
  }, e2.prototype.has = function(e3) {
    return this.idNodeMap.has(e3);
  }, e2.prototype.hasNode = function(e3) {
    return this.nodeMetaMap.has(e3);
  }, e2.prototype.add = function(e3, t2) {
    var n2 = t2.id;
    this.idNodeMap.set(n2, e3), this.nodeMetaMap.set(e3, t2);
  }, e2.prototype.replace = function(e3, t2) {
    var n2 = this.getNode(e3);
    if (n2) {
      var r2 = this.nodeMetaMap.get(n2);
      r2 && this.nodeMetaMap.set(t2, r2);
    }
    this.idNodeMap.set(e3, t2);
  }, e2.prototype.reset = function() {
    this.idNodeMap = /* @__PURE__ */ new Map(), this.nodeMetaMap = /* @__PURE__ */ new WeakMap();
  }, e2;
}();
function q(e2) {
  var t2 = e2.maskInputOptions, n2 = e2.tagName, r2 = e2.type, o2 = e2.value, s2 = e2.maskInputFn, i2 = o2 || "";
  return (t2[n2.toLowerCase()] || t2[r2]) && (i2 = s2 ? s2(i2) : "*".repeat(i2.length)), i2;
}
var $ = "__rrweb_original__";
var ee;
var te;
var ne = 1;
var re = new RegExp("[^a-z0-9-_:]");
var oe = -2;
function se() {
  return ne++;
}
var ie = /url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm;
var ae = /^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/;
var le = /^(data:)([^,]*),(.*)/i;
function ce(e2, t2) {
  return (e2 || "").replace(ie, function(e3, n2, r2, o2, s2, i2) {
    var a2, l2 = r2 || s2 || i2, c2 = n2 || o2 || "";
    if (!l2) return e3;
    if (!ae.test(l2)) return "url(".concat(c2).concat(l2).concat(c2, ")");
    if (le.test(l2)) return "url(".concat(c2).concat(l2).concat(c2, ")");
    if ("/" === l2[0]) return "url(".concat(c2).concat((a2 = t2, (a2.indexOf("//") > -1 ? a2.split("/").slice(0, 3).join("/") : a2.split("/")[0]).split("?")[0] + l2)).concat(c2, ")");
    var u2 = t2.split("/"), d2 = l2.split("/");
    u2.pop();
    for (var h2 = 0, p2 = d2; h2 < p2.length; h2++) {
      var m2 = p2[h2];
      "." !== m2 && (".." === m2 ? u2.pop() : u2.push(m2));
    }
    return "url(".concat(c2).concat(u2.join("/")).concat(c2, ")");
  });
}
var ue = /^[^ \t\n\r\u000c]+/;
var de = /^[, \t\n\r\u000c]+/;
function he(e2, t2) {
  if (!t2 || "" === t2.trim()) return t2;
  var n2 = e2.createElement("a");
  return n2.href = t2, n2.href;
}
function pe(e2) {
  return Boolean("svg" === e2.tagName || e2.ownerSVGElement);
}
function me() {
  var e2 = document.createElement("a");
  return e2.href = "", e2.href;
}
function ge(e2, t2, n2, r2) {
  return "src" === n2 || "href" === n2 && r2 && ("use" !== t2 || "#" !== r2[0]) || "xlink:href" === n2 && r2 && "#" !== r2[0] ? he(e2, r2) : "background" !== n2 || !r2 || "table" !== t2 && "td" !== t2 && "th" !== t2 ? "srcset" === n2 && r2 ? function(e3, t3) {
    if ("" === t3.trim()) return t3;
    var n3 = 0;
    function r3(e4) {
      var r4, o3 = e4.exec(t3.substring(n3));
      return o3 ? (r4 = o3[0], n3 += r4.length, r4) : "";
    }
    for (var o2 = []; r3(de), !(n3 >= t3.length); ) {
      var s2 = r3(ue);
      if ("," === s2.slice(-1)) s2 = he(e3, s2.substring(0, s2.length - 1)), o2.push(s2);
      else {
        var i2 = "";
        s2 = he(e3, s2);
        for (var a2 = false; ; ) {
          var l2 = t3.charAt(n3);
          if ("" === l2) {
            o2.push((s2 + i2).trim());
            break;
          }
          if (a2) ")" === l2 && (a2 = false);
          else {
            if ("," === l2) {
              n3 += 1, o2.push((s2 + i2).trim());
              break;
            }
            "(" === l2 && (a2 = true);
          }
          i2 += l2, n3 += 1;
        }
      }
    }
    return o2.join(", ");
  }(e2, r2) : "style" === n2 && r2 ? ce(r2, me()) : "object" === t2 && "data" === n2 && r2 ? he(e2, r2) : r2 : he(e2, r2);
}
function fe(e2, t2, n2) {
  if (!e2) return false;
  if (e2.nodeType !== e2.ELEMENT_NODE) return !!n2 && fe(e2.parentNode, t2, n2);
  for (var r2 = e2.classList.length; r2--; ) {
    var o2 = e2.classList[r2];
    if (t2.test(o2)) return true;
  }
  return !!n2 && fe(e2.parentNode, t2, n2);
}
function Ie(e2, t2, n2) {
  var r2 = e2.nodeType === e2.ELEMENT_NODE ? e2 : e2.parentElement;
  if (null === r2) return false;
  if ("string" == typeof t2) {
    if (r2.classList.contains(t2)) return true;
    if (r2.closest(".".concat(t2))) return true;
  } else if (fe(r2, t2, true)) return true;
  if (n2) {
    if (r2.matches(n2)) return true;
    if (r2.closest(n2)) return true;
  }
  return false;
}
function Ce(e2, t2) {
  var n2 = t2.doc, r2 = t2.mirror, o2 = t2.blockClass, s2 = t2.blockSelector, i2 = t2.maskTextClass, a2 = t2.maskTextSelector, l2 = t2.inlineStylesheet, c2 = t2.maskInputOptions, u2 = void 0 === c2 ? {} : c2, d2 = t2.maskTextFn, h2 = t2.maskInputFn, p2 = t2.dataURLOptions, m2 = void 0 === p2 ? {} : p2, g2 = t2.inlineImages, f2 = t2.recordCanvas, I2 = t2.keepIframeSrcFn, C2 = t2.newlyAddedElement, y2 = void 0 !== C2 && C2, v2 = function(e3, t3) {
    if (!t3.hasNode(e3)) return;
    var n3 = t3.getId(e3);
    return 1 === n3 ? void 0 : n3;
  }(n2, r2);
  switch (e2.nodeType) {
    case e2.DOCUMENT_NODE:
      return "CSS1Compat" !== e2.compatMode ? { type: z.Document, childNodes: [], compatMode: e2.compatMode } : { type: z.Document, childNodes: [] };
    case e2.DOCUMENT_TYPE_NODE:
      return { type: z.DocumentType, name: e2.name, publicId: e2.publicId, systemId: e2.systemId, rootId: v2 };
    case e2.ELEMENT_NODE:
      return function(e3, t3) {
        for (var n3 = t3.doc, r3 = t3.blockClass, o3 = t3.blockSelector, s3 = t3.inlineStylesheet, i3 = t3.maskInputOptions, a3 = void 0 === i3 ? {} : i3, l3 = t3.maskInputFn, c3 = t3.dataURLOptions, u3 = void 0 === c3 ? {} : c3, d3 = t3.inlineImages, h3 = t3.recordCanvas, p3 = t3.keepIframeSrcFn, m3 = t3.newlyAddedElement, g3 = void 0 !== m3 && m3, f3 = t3.rootId, I3 = function(e4, t4, n4) {
          if ("string" == typeof t4) {
            if (e4.classList.contains(t4)) return true;
          } else for (var r4 = e4.classList.length; r4--; ) {
            var o4 = e4.classList[r4];
            if (t4.test(o4)) return true;
          }
          return !!n4 && e4.matches(n4);
        }(e3, r3, o3), C3 = function(e4) {
          if (e4 instanceof HTMLFormElement) return "form";
          var t4 = e4.tagName.toLowerCase().trim();
          return re.test(t4) ? "div" : t4;
        }(e3), y3 = {}, v3 = e3.attributes.length, b2 = 0; b2 < v3; b2++) {
          var S2 = e3.attributes[b2];
          y3[S2.name] = ge(n3, C3, S2.name, S2.value);
        }
        if ("link" === C3 && s3) {
          var A2 = Array.from(n3.styleSheets).find(function(t4) {
            return t4.href === e3.href;
          }), k2 = null;
          A2 && (k2 = H(A2)), k2 && (delete y3.rel, delete y3.href, y3._cssText = ce(k2, A2.href));
        }
        if ("style" === C3 && e3.sheet && !(e3.innerText || e3.textContent || "").trim().length) {
          (k2 = H(e3.sheet)) && (y3._cssText = ce(k2, me()));
        }
        if ("input" === C3 || "textarea" === C3 || "select" === C3) {
          var w2 = e3.value, M2 = e3.checked;
          "radio" !== y3.type && "checkbox" !== y3.type && "submit" !== y3.type && "button" !== y3.type && w2 ? y3.value = q({ type: y3.type, tagName: C3, value: w2, maskInputOptions: a3, maskInputFn: l3 }) : M2 && (y3.checked = M2);
        }
        "option" === C3 && (e3.selected && !a3.select ? y3.selected = true : delete y3.selected);
        if ("canvas" === C3 && h3) {
          if ("2d" === e3.__context) (function(e4) {
            var t4 = e4.getContext("2d");
            if (!t4) return true;
            for (var n4 = 0; n4 < e4.width; n4 += 50) for (var r4 = 0; r4 < e4.height; r4 += 50) {
              var o4 = t4.getImageData, s4 = $ in o4 ? o4[$] : o4;
              if (new Uint32Array(s4.call(t4, n4, r4, Math.min(50, e4.width - n4), Math.min(50, e4.height - r4)).data.buffer).some(function(e5) {
                return 0 !== e5;
              })) return false;
            }
            return true;
          })(e3) || (y3.rr_dataURL = e3.toDataURL(u3.type, u3.quality));
          else if (!("__context" in e3)) {
            var x2 = e3.toDataURL(u3.type, u3.quality), T2 = document.createElement("canvas");
            T2.width = e3.width, T2.height = e3.height, x2 !== T2.toDataURL(u3.type, u3.quality) && (y3.rr_dataURL = x2);
          }
        }
        if ("img" === C3 && d3) {
          ee || (ee = n3.createElement("canvas"), te = ee.getContext("2d"));
          var E2 = e3, N2 = E2.crossOrigin;
          E2.crossOrigin = "anonymous";
          var R2 = function() {
            try {
              ee.width = E2.naturalWidth, ee.height = E2.naturalHeight, te.drawImage(E2, 0, 0), y3.rr_dataURL = ee.toDataURL(u3.type, u3.quality);
            } catch (e4) {
              console.warn("Cannot inline img src=".concat(E2.currentSrc, "! Error: ").concat(e4));
            }
            N2 ? y3.crossOrigin = N2 : E2.removeAttribute("crossorigin");
          };
          E2.complete && 0 !== E2.naturalWidth ? R2() : E2.onload = R2;
        }
        "audio" !== C3 && "video" !== C3 || (y3.rr_mediaState = e3.paused ? "paused" : "played", y3.rr_mediaCurrentTime = e3.currentTime);
        g3 || (e3.scrollLeft && (y3.rr_scrollLeft = e3.scrollLeft), e3.scrollTop && (y3.rr_scrollTop = e3.scrollTop));
        if (I3) {
          var F2 = e3.getBoundingClientRect(), O2 = F2.width, L2 = F2.height;
          y3 = { class: y3.class, rr_width: "".concat(O2, "px"), rr_height: "".concat(L2, "px") };
        }
        "iframe" !== C3 || p3(y3.src) || (e3.contentDocument || (y3.rr_src = y3.src), delete y3.src);
        return { type: z.Element, tagName: C3, attributes: y3, childNodes: [], isSVG: pe(e3) || void 0, needBlock: I3, rootId: f3 };
      }(e2, { doc: n2, blockClass: o2, blockSelector: s2, inlineStylesheet: l2, maskInputOptions: u2, maskInputFn: h2, dataURLOptions: m2, inlineImages: g2, recordCanvas: f2, keepIframeSrcFn: I2, newlyAddedElement: y2, rootId: v2 });
    case e2.TEXT_NODE:
      return function(e3, t3) {
        var n3, r3 = t3.maskTextClass, o3 = t3.maskTextSelector, s3 = t3.maskTextFn, i3 = t3.rootId, a3 = e3.parentNode && e3.parentNode.tagName, l3 = e3.textContent, c3 = "STYLE" === a3 || void 0, u3 = "SCRIPT" === a3 || void 0;
        if (c3 && l3) {
          try {
            e3.nextSibling || e3.previousSibling || (null === (n3 = e3.parentNode.sheet) || void 0 === n3 ? void 0 : n3.cssRules) && (l3 = (d3 = e3.parentNode.sheet).cssRules ? Array.from(d3.cssRules).map(function(e4) {
              return e4.cssText || "";
            }).join("") : "");
          } catch (t4) {
            console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t4), e3);
          }
          l3 = ce(l3, me());
        }
        var d3;
        u3 && (l3 = "SCRIPT_PLACEHOLDER");
        !c3 && !u3 && l3 && Ie(e3, r3, o3) && (l3 = s3 ? s3(l3) : l3.replace(/[\S]/g, "*"));
        return { type: z.Text, textContent: l3 || "", isStyle: c3, rootId: i3 };
      }(e2, { maskTextClass: i2, maskTextSelector: a2, maskTextFn: d2, rootId: v2 });
    case e2.CDATA_SECTION_NODE:
      return { type: z.CDATA, textContent: "", rootId: v2 };
    case e2.COMMENT_NODE:
      return { type: z.Comment, textContent: e2.textContent || "", rootId: v2 };
    default:
      return false;
  }
}
function ye(e2) {
  return void 0 === e2 ? "" : e2.toLowerCase();
}
function ve(e2, t2) {
  var n2, r2 = t2.doc, o2 = t2.mirror, s2 = t2.blockClass, i2 = t2.blockSelector, a2 = t2.maskTextClass, l2 = t2.maskTextSelector, c2 = t2.skipChild, u2 = void 0 !== c2 && c2, d2 = t2.inlineStylesheet, h2 = void 0 === d2 || d2, p2 = t2.maskInputOptions, m2 = void 0 === p2 ? {} : p2, g2 = t2.maskTextFn, f2 = t2.maskInputFn, I2 = t2.slimDOMOptions, C2 = t2.dataURLOptions, y2 = void 0 === C2 ? {} : C2, v2 = t2.inlineImages, b2 = void 0 !== v2 && v2, S2 = t2.recordCanvas, A2 = void 0 !== S2 && S2, k2 = t2.onSerialize, w2 = t2.onIframeLoad, M2 = t2.iframeLoadTimeout, x2 = void 0 === M2 ? 5e3 : M2, T2 = t2.onStylesheetLoad, E2 = t2.stylesheetLoadTimeout, N2 = void 0 === E2 ? 5e3 : E2, R2 = t2.keepIframeSrcFn, F2 = void 0 === R2 ? function() {
    return false;
  } : R2, O2 = t2.newlyAddedElement, L2 = void 0 !== O2 && O2, D2 = t2.preserveWhiteSpace, B2 = void 0 === D2 || D2, W2 = Ce(e2, { doc: r2, mirror: o2, blockClass: s2, blockSelector: i2, maskTextClass: a2, maskTextSelector: l2, inlineStylesheet: h2, maskInputOptions: m2, maskTextFn: g2, maskInputFn: f2, dataURLOptions: y2, inlineImages: b2, recordCanvas: A2, keepIframeSrcFn: F2, newlyAddedElement: L2 });
  if (!W2) return console.warn(e2, "not serialized"), null;
  n2 = o2.hasNode(e2) ? o2.getId(e2) : !function(e3, t3) {
    if (t3.comment && e3.type === z.Comment) return true;
    if (e3.type === z.Element) {
      if (t3.script && ("script" === e3.tagName || "link" === e3.tagName && "preload" === e3.attributes.rel && "script" === e3.attributes.as || "link" === e3.tagName && "prefetch" === e3.attributes.rel && "string" == typeof e3.attributes.href && e3.attributes.href.endsWith(".js"))) return true;
      if (t3.headFavicon && ("link" === e3.tagName && "shortcut icon" === e3.attributes.rel || "meta" === e3.tagName && (ye(e3.attributes.name).match(/^msapplication-tile(image|color)$/) || "application-name" === ye(e3.attributes.name) || "icon" === ye(e3.attributes.rel) || "apple-touch-icon" === ye(e3.attributes.rel) || "shortcut icon" === ye(e3.attributes.rel)))) return true;
      if ("meta" === e3.tagName) {
        if (t3.headMetaDescKeywords && ye(e3.attributes.name).match(/^description|keywords$/)) return true;
        if (t3.headMetaSocial && (ye(e3.attributes.property).match(/^(og|twitter|fb):/) || ye(e3.attributes.name).match(/^(og|twitter):/) || "pinterest" === ye(e3.attributes.name))) return true;
        if (t3.headMetaRobots && ("robots" === ye(e3.attributes.name) || "googlebot" === ye(e3.attributes.name) || "bingbot" === ye(e3.attributes.name))) return true;
        if (t3.headMetaHttpEquiv && void 0 !== e3.attributes["http-equiv"]) return true;
        if (t3.headMetaAuthorship && ("author" === ye(e3.attributes.name) || "generator" === ye(e3.attributes.name) || "framework" === ye(e3.attributes.name) || "publisher" === ye(e3.attributes.name) || "progid" === ye(e3.attributes.name) || ye(e3.attributes.property).match(/^article:/) || ye(e3.attributes.property).match(/^product:/))) return true;
        if (t3.headMetaVerification && ("google-site-verification" === ye(e3.attributes.name) || "yandex-verification" === ye(e3.attributes.name) || "csrf-token" === ye(e3.attributes.name) || "p:domain_verify" === ye(e3.attributes.name) || "verify-v1" === ye(e3.attributes.name) || "verification" === ye(e3.attributes.name) || "shopify-checkout-api-token" === ye(e3.attributes.name))) return true;
      }
    }
    return false;
  }(W2, I2) && (B2 || W2.type !== z.Text || W2.isStyle || W2.textContent.replace(/^\s+|\s+$/gm, "").length) ? se() : oe;
  var U2 = Object.assign(W2, { id: n2 });
  if (o2.add(e2, U2), n2 === oe) return null;
  k2 && k2(e2);
  var Z2 = !u2;
  if (U2.type === z.Element) {
    Z2 = Z2 && !U2.needBlock, delete U2.needBlock;
    var G2 = e2.shadowRoot;
    G2 && J(G2) && (U2.isShadowHost = true);
  }
  if ((U2.type === z.Document || U2.type === z.Element) && Z2) {
    I2.headWhitespace && U2.type === z.Element && "head" === U2.tagName && (B2 = false);
    for (var V2 = { doc: r2, mirror: o2, blockClass: s2, blockSelector: i2, maskTextClass: a2, maskTextSelector: l2, skipChild: u2, inlineStylesheet: h2, maskInputOptions: m2, maskTextFn: g2, maskInputFn: f2, slimDOMOptions: I2, dataURLOptions: y2, inlineImages: b2, recordCanvas: A2, preserveWhiteSpace: B2, onSerialize: k2, onIframeLoad: w2, iframeLoadTimeout: x2, onStylesheetLoad: T2, stylesheetLoadTimeout: N2, keepIframeSrcFn: F2 }, K2 = 0, _2 = Array.from(e2.childNodes); K2 < _2.length; K2++) {
      (H2 = ve(_2[K2], V2)) && U2.childNodes.push(H2);
    }
    if (function(e3) {
      return e3.nodeType === e3.ELEMENT_NODE;
    }(e2) && e2.shadowRoot) for (var P2 = 0, Y2 = Array.from(e2.shadowRoot.childNodes); P2 < Y2.length; P2++) {
      var H2;
      (H2 = ve(Y2[P2], V2)) && (J(e2.shadowRoot) && (H2.isShadow = true), U2.childNodes.push(H2));
    }
  }
  return e2.parentNode && j(e2.parentNode) && J(e2.parentNode) && (U2.isShadow = true), U2.type === z.Element && "iframe" === U2.tagName && function(e3, t3, n3) {
    var r3 = e3.contentWindow;
    if (r3) {
      var o3, s3 = false;
      try {
        o3 = r3.document.readyState;
      } catch (e4) {
        return;
      }
      if ("complete" === o3) {
        var i3 = "about:blank";
        if (r3.location.href !== i3 || e3.src === i3 || "" === e3.src) return setTimeout(t3, 0), e3.addEventListener("load", t3);
        e3.addEventListener("load", t3);
      } else {
        var a3 = setTimeout(function() {
          s3 || (t3(), s3 = true);
        }, n3);
        e3.addEventListener("load", function() {
          clearTimeout(a3), s3 = true, t3();
        });
      }
    }
  }(e2, function() {
    var t3 = e2.contentDocument;
    if (t3 && w2) {
      var n3 = ve(t3, { doc: t3, mirror: o2, blockClass: s2, blockSelector: i2, maskTextClass: a2, maskTextSelector: l2, skipChild: false, inlineStylesheet: h2, maskInputOptions: m2, maskTextFn: g2, maskInputFn: f2, slimDOMOptions: I2, dataURLOptions: y2, inlineImages: b2, recordCanvas: A2, preserveWhiteSpace: B2, onSerialize: k2, onIframeLoad: w2, iframeLoadTimeout: x2, onStylesheetLoad: T2, stylesheetLoadTimeout: N2, keepIframeSrcFn: F2 });
      n3 && w2(e2, n3);
    }
  }, x2), U2.type === z.Element && "link" === U2.tagName && "stylesheet" === U2.attributes.rel && function(e3, t3, n3) {
    var r3, o3 = false;
    try {
      r3 = e3.sheet;
    } catch (e4) {
      return;
    }
    if (!r3) {
      var s3 = setTimeout(function() {
        o3 || (t3(), o3 = true);
      }, n3);
      e3.addEventListener("load", function() {
        clearTimeout(s3), o3 = true, t3();
      });
    }
  }(e2, function() {
    if (T2) {
      var t3 = ve(e2, { doc: r2, mirror: o2, blockClass: s2, blockSelector: i2, maskTextClass: a2, maskTextSelector: l2, skipChild: false, inlineStylesheet: h2, maskInputOptions: m2, maskTextFn: g2, maskInputFn: f2, slimDOMOptions: I2, dataURLOptions: y2, inlineImages: b2, recordCanvas: A2, preserveWhiteSpace: B2, onSerialize: k2, onIframeLoad: w2, iframeLoadTimeout: x2, onStylesheetLoad: T2, stylesheetLoadTimeout: N2, keepIframeSrcFn: F2 });
      t3 && T2(e2, t3);
    }
  }, N2), U2;
}
function be(e2, t2, n2 = document) {
  const r2 = { capture: true, passive: true };
  return n2.addEventListener(e2, t2, r2), () => n2.removeEventListener(e2, t2, r2);
}
var Se = "Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";
var Ae = { map: {}, getId: () => (console.error(Se), -1), getNode: () => (console.error(Se), null), removeNodeFromMap() {
  console.error(Se);
}, has: () => (console.error(Se), false), reset() {
  console.error(Se);
} };
function ke(e2, t2, n2 = {}) {
  let r2 = null, o2 = 0;
  return function(...s2) {
    const i2 = Date.now();
    o2 || false !== n2.leading || (o2 = i2);
    const a2 = t2 - (i2 - o2), l2 = this;
    a2 <= 0 || a2 > t2 ? (r2 && (clearTimeout(r2), r2 = null), o2 = i2, e2.apply(l2, s2)) : r2 || false === n2.trailing || (r2 = setTimeout(() => {
      o2 = false === n2.leading ? 0 : Date.now(), r2 = null, e2.apply(l2, s2);
    }, a2));
  };
}
function we(e2, t2, n2, r2, o2 = window) {
  const s2 = o2.Object.getOwnPropertyDescriptor(e2, t2);
  return o2.Object.defineProperty(e2, t2, r2 ? n2 : { set(e3) {
    setTimeout(() => {
      n2.set.call(this, e3);
    }, 0), s2 && s2.set && s2.set.call(this, e3);
  } }), () => we(e2, t2, s2 || {}, true);
}
function Me(e2, t2, n2) {
  try {
    if (!(t2 in e2)) return () => {
    };
    const r2 = e2[t2], o2 = n2(r2);
    return "function" == typeof o2 && (o2.prototype = o2.prototype || {}, Object.defineProperties(o2, { __rrweb_original__: { enumerable: false, value: r2 } })), e2[t2] = o2, () => {
      e2[t2] = r2;
    };
  } catch (e3) {
    return () => {
    };
  }
}
function xe() {
  return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight;
}
function Te() {
  return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth;
}
function Ee(e2, t2, n2, r2) {
  if (!e2) return false;
  const o2 = e2.nodeType === e2.ELEMENT_NODE ? e2 : e2.parentElement;
  if (!o2) return false;
  if ("string" == typeof t2) {
    if (o2.classList.contains(t2)) return true;
    if (r2 && null !== o2.closest("." + t2)) return true;
  } else if (fe(o2, t2, r2)) return true;
  if (n2) {
    if (e2.matches(n2)) return true;
    if (r2 && null !== o2.closest(n2)) return true;
  }
  return false;
}
function Ne(e2, t2) {
  return t2.getId(e2) === oe;
}
function Re(e2, t2) {
  if (j(e2)) return false;
  const n2 = t2.getId(e2);
  return !t2.has(n2) || (!e2.parentNode || e2.parentNode.nodeType !== e2.DOCUMENT_NODE) && (!e2.parentNode || Re(e2.parentNode, t2));
}
function Fe(e2) {
  return Boolean(e2.changedTouches);
}
function Oe(e2, t2) {
  return Boolean("IFRAME" === e2.nodeName && t2.getMeta(e2));
}
function Le(e2, t2) {
  return Boolean("LINK" === e2.nodeName && e2.nodeType === e2.ELEMENT_NODE && e2.getAttribute && "stylesheet" === e2.getAttribute("rel") && t2.getMeta(e2));
}
function De(e2) {
  return Boolean(null == e2 ? void 0 : e2.shadowRoot);
}
"undefined" != typeof window && window.Proxy && window.Reflect && (Ae = new Proxy(Ae, { get: (e2, t2, n2) => ("map" === t2 && console.error(Se), Reflect.get(e2, t2, n2)) }));
var Be = class {
  constructor() {
    this.id = 1, this.styleIDMap = /* @__PURE__ */ new WeakMap(), this.idStyleMap = /* @__PURE__ */ new Map();
  }
  getId(e2) {
    var t2;
    return null !== (t2 = this.styleIDMap.get(e2)) && void 0 !== t2 ? t2 : -1;
  }
  has(e2) {
    return this.styleIDMap.has(e2);
  }
  add(e2, t2) {
    if (this.has(e2)) return this.getId(e2);
    let n2;
    return n2 = void 0 === t2 ? this.id++ : t2, this.styleIDMap.set(e2, n2), this.idStyleMap.set(n2, e2), n2;
  }
  getStyle(e2) {
    return this.idStyleMap.get(e2) || null;
  }
  reset() {
    this.styleIDMap = /* @__PURE__ */ new WeakMap(), this.idStyleMap = /* @__PURE__ */ new Map(), this.id = 1;
  }
  generateId() {
    return this.id++;
  }
};
var We = ((e2) => (e2[e2.DomContentLoaded = 0] = "DomContentLoaded", e2[e2.Load = 1] = "Load", e2[e2.FullSnapshot = 2] = "FullSnapshot", e2[e2.IncrementalSnapshot = 3] = "IncrementalSnapshot", e2[e2.Meta = 4] = "Meta", e2[e2.Custom = 5] = "Custom", e2[e2.Plugin = 6] = "Plugin", e2))(We || {});
var Ue = ((e2) => (e2[e2.Mutation = 0] = "Mutation", e2[e2.MouseMove = 1] = "MouseMove", e2[e2.MouseInteraction = 2] = "MouseInteraction", e2[e2.Scroll = 3] = "Scroll", e2[e2.ViewportResize = 4] = "ViewportResize", e2[e2.Input = 5] = "Input", e2[e2.TouchMove = 6] = "TouchMove", e2[e2.MediaInteraction = 7] = "MediaInteraction", e2[e2.StyleSheetRule = 8] = "StyleSheetRule", e2[e2.CanvasMutation = 9] = "CanvasMutation", e2[e2.Font = 10] = "Font", e2[e2.Log = 11] = "Log", e2[e2.Drag = 12] = "Drag", e2[e2.StyleDeclaration = 13] = "StyleDeclaration", e2[e2.Selection = 14] = "Selection", e2[e2.AdoptedStyleSheet = 15] = "AdoptedStyleSheet", e2))(Ue || {});
var Ze = ((e2) => (e2[e2.MouseUp = 0] = "MouseUp", e2[e2.MouseDown = 1] = "MouseDown", e2[e2.Click = 2] = "Click", e2[e2.ContextMenu = 3] = "ContextMenu", e2[e2.DblClick = 4] = "DblClick", e2[e2.Focus = 5] = "Focus", e2[e2.Blur = 6] = "Blur", e2[e2.TouchStart = 7] = "TouchStart", e2[e2.TouchMove_Departed = 8] = "TouchMove_Departed", e2[e2.TouchEnd = 9] = "TouchEnd", e2[e2.TouchCancel = 10] = "TouchCancel", e2))(Ze || {});
var Ge = ((e2) => (e2[e2["2D"] = 0] = "2D", e2[e2.WebGL = 1] = "WebGL", e2[e2.WebGL2 = 2] = "WebGL2", e2))(Ge || {});
function Ve(e2) {
  return "__ln" in e2;
}
var Ke = class {
  constructor() {
    this.length = 0, this.head = null;
  }
  get(e2) {
    if (e2 >= this.length) throw new Error("Position outside of list range");
    let t2 = this.head;
    for (let n2 = 0; n2 < e2; n2++) t2 = (null == t2 ? void 0 : t2.next) || null;
    return t2;
  }
  addNode(e2) {
    const t2 = { value: e2, previous: null, next: null };
    if (e2.__ln = t2, e2.previousSibling && Ve(e2.previousSibling)) {
      const n2 = e2.previousSibling.__ln.next;
      t2.next = n2, t2.previous = e2.previousSibling.__ln, e2.previousSibling.__ln.next = t2, n2 && (n2.previous = t2);
    } else if (e2.nextSibling && Ve(e2.nextSibling) && e2.nextSibling.__ln.previous) {
      const n2 = e2.nextSibling.__ln.previous;
      t2.previous = n2, t2.next = e2.nextSibling.__ln, e2.nextSibling.__ln.previous = t2, n2 && (n2.next = t2);
    } else this.head && (this.head.previous = t2), t2.next = this.head, this.head = t2;
    this.length++;
  }
  removeNode(e2) {
    const t2 = e2.__ln;
    this.head && (t2.previous ? (t2.previous.next = t2.next, t2.next && (t2.next.previous = t2.previous)) : (this.head = t2.next, this.head && (this.head.previous = null)), e2.__ln && delete e2.__ln, this.length--);
  }
};
var _e = (e2, t2) => `${e2}@${t2}`;
var Pe = class {
  constructor() {
    this.frozen = false, this.locked = false, this.texts = [], this.attributes = [], this.removes = [], this.mapRemoves = [], this.movedMap = {}, this.addedSet = /* @__PURE__ */ new Set(), this.movedSet = /* @__PURE__ */ new Set(), this.droppedSet = /* @__PURE__ */ new Set(), this.processMutations = (e2) => {
      e2.forEach(this.processMutation), this.emit();
    }, this.emit = () => {
      if (this.frozen || this.locked) return;
      const e2 = [], t2 = new Ke(), n2 = (e3) => {
        let t3 = e3, n3 = oe;
        for (; n3 === oe; ) t3 = t3 && t3.nextSibling, n3 = t3 && this.mirror.getId(t3);
        return n3;
      }, r2 = (r3) => {
        var o3, s3, i2, a2;
        let l2 = null;
        (null === (s3 = null === (o3 = r3.getRootNode) || void 0 === o3 ? void 0 : o3.call(r3)) || void 0 === s3 ? void 0 : s3.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && r3.getRootNode().host && (l2 = r3.getRootNode().host);
        let c2 = l2;
        for (; (null === (a2 = null === (i2 = null == c2 ? void 0 : c2.getRootNode) || void 0 === i2 ? void 0 : i2.call(c2)) || void 0 === a2 ? void 0 : a2.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && c2.getRootNode().host; ) c2 = c2.getRootNode().host;
        const u2 = !(this.doc.contains(r3) || c2 && this.doc.contains(c2));
        if (!r3.parentNode || u2) return;
        const d2 = j(r3.parentNode) ? this.mirror.getId(l2) : this.mirror.getId(r3.parentNode), h2 = n2(r3);
        if (-1 === d2 || -1 === h2) return t2.addNode(r3);
        const p2 = ve(r3, { doc: this.doc, mirror: this.mirror, blockClass: this.blockClass, blockSelector: this.blockSelector, maskTextClass: this.maskTextClass, maskTextSelector: this.maskTextSelector, skipChild: true, newlyAddedElement: true, inlineStylesheet: this.inlineStylesheet, maskInputOptions: this.maskInputOptions, maskTextFn: this.maskTextFn, maskInputFn: this.maskInputFn, slimDOMOptions: this.slimDOMOptions, dataURLOptions: this.dataURLOptions, recordCanvas: this.recordCanvas, inlineImages: this.inlineImages, onSerialize: (e3) => {
          Oe(e3, this.mirror) && this.iframeManager.addIframe(e3), Le(e3, this.mirror) && this.stylesheetManager.trackLinkElement(e3), De(r3) && this.shadowDomManager.addShadowRoot(r3.shadowRoot, this.doc);
        }, onIframeLoad: (e3, t3) => {
          this.iframeManager.attachIframe(e3, t3), this.shadowDomManager.observeAttachShadow(e3);
        }, onStylesheetLoad: (e3, t3) => {
          this.stylesheetManager.attachLinkElement(e3, t3);
        } });
        p2 && e2.push({ parentId: d2, nextId: h2, node: p2 });
      };
      for (; this.mapRemoves.length; ) this.mirror.removeNodeFromMap(this.mapRemoves.shift());
      for (const e3 of Array.from(this.movedSet.values())) ze(this.removes, e3, this.mirror) && !this.movedSet.has(e3.parentNode) || r2(e3);
      for (const e3 of Array.from(this.addedSet.values())) Je(this.droppedSet, e3) || ze(this.removes, e3, this.mirror) ? Je(this.movedSet, e3) ? r2(e3) : this.droppedSet.add(e3) : r2(e3);
      let o2 = null;
      for (; t2.length; ) {
        let e3 = null;
        if (o2) {
          const t3 = this.mirror.getId(o2.value.parentNode), r3 = n2(o2.value);
          -1 !== t3 && -1 !== r3 && (e3 = o2);
        }
        if (!e3) for (let r3 = t2.length - 1; r3 >= 0; r3--) {
          const o3 = t2.get(r3);
          if (o3) {
            const t3 = this.mirror.getId(o3.value.parentNode);
            if (-1 === n2(o3.value)) continue;
            if (-1 !== t3) {
              e3 = o3;
              break;
            }
            {
              const t4 = o3.value;
              if (t4.parentNode && t4.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                const n3 = t4.parentNode.host;
                if (-1 !== this.mirror.getId(n3)) {
                  e3 = o3;
                  break;
                }
              }
            }
          }
        }
        if (!e3) {
          for (; t2.head; ) t2.removeNode(t2.head.value);
          break;
        }
        o2 = e3.previous, t2.removeNode(e3.value), r2(e3.value);
      }
      const s2 = { texts: this.texts.map((e3) => ({ id: this.mirror.getId(e3.node), value: e3.value })).filter((e3) => this.mirror.has(e3.id)), attributes: this.attributes.map((e3) => ({ id: this.mirror.getId(e3.node), attributes: e3.attributes })).filter((e3) => this.mirror.has(e3.id)), removes: this.removes, adds: e2 };
      (s2.texts.length || s2.attributes.length || s2.removes.length || s2.adds.length) && (this.texts = [], this.attributes = [], this.removes = [], this.addedSet = /* @__PURE__ */ new Set(), this.movedSet = /* @__PURE__ */ new Set(), this.droppedSet = /* @__PURE__ */ new Set(), this.movedMap = {}, this.mutationCb(s2));
    }, this.processMutation = (e2) => {
      if (!Ne(e2.target, this.mirror)) switch (e2.type) {
        case "characterData": {
          const t2 = e2.target.textContent;
          Ee(e2.target, this.blockClass, this.blockSelector, false) || t2 === e2.oldValue || this.texts.push({ value: Ie(e2.target, this.maskTextClass, this.maskTextSelector) && t2 ? this.maskTextFn ? this.maskTextFn(t2) : t2.replace(/[\S]/g, "*") : t2, node: e2.target });
          break;
        }
        case "attributes": {
          const t2 = e2.target;
          let n2 = e2.target.getAttribute(e2.attributeName);
          if ("value" === e2.attributeName && (n2 = q({ maskInputOptions: this.maskInputOptions, tagName: e2.target.tagName, type: e2.target.getAttribute("type"), value: n2, maskInputFn: this.maskInputFn })), Ee(e2.target, this.blockClass, this.blockSelector, false) || n2 === e2.oldValue) return;
          let r2 = this.attributes.find((t3) => t3.node === e2.target);
          if ("IFRAME" === t2.tagName && "src" === e2.attributeName && !this.keepIframeSrcFn(n2)) {
            if (t2.contentDocument) return;
            e2.attributeName = "rr_src";
          }
          if (r2 || (r2 = { node: e2.target, attributes: {} }, this.attributes.push(r2)), "style" === e2.attributeName) {
            const n3 = this.doc.createElement("span");
            e2.oldValue && n3.setAttribute("style", e2.oldValue), void 0 !== r2.attributes.style && null !== r2.attributes.style || (r2.attributes.style = {});
            const o2 = r2.attributes.style;
            for (const e3 of Array.from(t2.style)) {
              const r3 = t2.style.getPropertyValue(e3), s2 = t2.style.getPropertyPriority(e3);
              r3 === n3.style.getPropertyValue(e3) && s2 === n3.style.getPropertyPriority(e3) || (o2[e3] = "" === s2 ? r3 : [r3, s2]);
            }
            for (const e3 of Array.from(n3.style)) "" === t2.style.getPropertyValue(e3) && (o2[e3] = false);
          } else r2.attributes[e2.attributeName] = ge(this.doc, t2.tagName, e2.attributeName, n2);
          break;
        }
        case "childList":
          if (Ee(e2.target, this.blockClass, this.blockSelector, true)) return;
          e2.addedNodes.forEach((t2) => this.genAdds(t2, e2.target)), e2.removedNodes.forEach((t2) => {
            const n2 = this.mirror.getId(t2), r2 = j(e2.target) ? this.mirror.getId(e2.target.host) : this.mirror.getId(e2.target);
            Ee(e2.target, this.blockClass, this.blockSelector, false) || Ne(t2, this.mirror) || !function(e3, t3) {
              return -1 !== t3.getId(e3);
            }(t2, this.mirror) || (this.addedSet.has(t2) ? (Ye(this.addedSet, t2), this.droppedSet.add(t2)) : this.addedSet.has(e2.target) && -1 === n2 || Re(e2.target, this.mirror) || (this.movedSet.has(t2) && this.movedMap[_e(n2, r2)] ? Ye(this.movedSet, t2) : this.removes.push({ parentId: r2, id: n2, isShadow: !(!j(e2.target) || !J(e2.target)) || void 0 })), this.mapRemoves.push(t2));
          });
      }
    }, this.genAdds = (e2, t2) => {
      if (this.mirror.hasNode(e2)) {
        if (Ne(e2, this.mirror)) return;
        this.movedSet.add(e2);
        let n2 = null;
        t2 && this.mirror.hasNode(t2) && (n2 = this.mirror.getId(t2)), n2 && -1 !== n2 && (this.movedMap[_e(this.mirror.getId(e2), n2)] = true);
      } else this.addedSet.add(e2), this.droppedSet.delete(e2);
      Ee(e2, this.blockClass, this.blockSelector, false) || e2.childNodes.forEach((e3) => this.genAdds(e3));
    };
  }
  init(e2) {
    ["mutationCb", "blockClass", "blockSelector", "maskTextClass", "maskTextSelector", "inlineStylesheet", "maskInputOptions", "maskTextFn", "maskInputFn", "keepIframeSrcFn", "recordCanvas", "inlineImages", "slimDOMOptions", "dataURLOptions", "doc", "mirror", "iframeManager", "stylesheetManager", "shadowDomManager", "canvasManager"].forEach((t2) => {
      this[t2] = e2[t2];
    });
  }
  freeze() {
    this.frozen = true, this.canvasManager.freeze();
  }
  unfreeze() {
    this.frozen = false, this.canvasManager.unfreeze(), this.emit();
  }
  isFrozen() {
    return this.frozen;
  }
  lock() {
    this.locked = true, this.canvasManager.lock();
  }
  unlock() {
    this.locked = false, this.canvasManager.unlock(), this.emit();
  }
  reset() {
    this.shadowDomManager.reset(), this.canvasManager.reset();
  }
};
function Ye(e2, t2) {
  e2.delete(t2), t2.childNodes.forEach((t3) => Ye(e2, t3));
}
function ze(e2, t2, n2) {
  return 0 !== e2.length && je(e2, t2, n2);
}
function je(e2, t2, n2) {
  const { parentNode: r2 } = t2;
  if (!r2) return false;
  const o2 = n2.getId(r2);
  return !!e2.some((e3) => e3.id === o2) || je(e2, r2, n2);
}
function Je(e2, t2) {
  return 0 !== e2.size && He(e2, t2);
}
function He(e2, t2) {
  const { parentNode: n2 } = t2;
  return !!n2 && (!!e2.has(n2) || He(e2, n2));
}
var Qe = [];
var Xe = "undefined" != typeof CSSGroupingRule;
var qe = "undefined" != typeof CSSMediaRule;
var $e = "undefined" != typeof CSSSupportsRule;
var et = "undefined" != typeof CSSConditionRule;
function tt(e2) {
  try {
    if ("composedPath" in e2) {
      const t2 = e2.composedPath();
      if (t2.length) return t2[0];
    } else if ("path" in e2 && e2.path.length) return e2.path[0];
    return e2.target;
  } catch (t2) {
    return e2.target;
  }
}
function nt(e2, t2) {
  var n2, r2;
  const o2 = new Pe();
  Qe.push(o2), o2.init(e2);
  let s2 = window.MutationObserver || window.__rrMutationObserver;
  const i2 = null === (r2 = null === (n2 = null === window || void 0 === window ? void 0 : window.Zone) || void 0 === n2 ? void 0 : n2.__symbol__) || void 0 === r2 ? void 0 : r2.call(n2, "MutationObserver");
  i2 && window[i2] && (s2 = window[i2]);
  const a2 = new s2(o2.processMutations.bind(o2));
  return a2.observe(t2, { attributes: true, attributeOldValue: true, characterData: true, characterDataOldValue: true, childList: true, subtree: true }), a2;
}
function rt({ mouseInteractionCb: e2, doc: t2, mirror: n2, blockClass: r2, blockSelector: o2, sampling: s2 }) {
  if (false === s2.mouseInteraction) return () => {
  };
  const i2 = true === s2.mouseInteraction || void 0 === s2.mouseInteraction ? {} : s2.mouseInteraction, a2 = [];
  return Object.keys(Ze).filter((e3) => Number.isNaN(Number(e3)) && !e3.endsWith("_Departed") && false !== i2[e3]).forEach((s3) => {
    const i3 = s3.toLowerCase(), l2 = /* @__PURE__ */ ((t3) => (s4) => {
      const i4 = tt(s4);
      if (Ee(i4, r2, o2, true)) return;
      const a3 = Fe(s4) ? s4.changedTouches[0] : s4;
      if (!a3) return;
      const l3 = n2.getId(i4), { clientX: c2, clientY: u2 } = a3;
      e2({ type: Ze[t3], id: l3, x: c2, y: u2 });
    })(s3);
    a2.push(be(i3, l2, t2));
  }), () => {
    a2.forEach((e3) => e3());
  };
}
function ot({ scrollCb: e2, doc: t2, mirror: n2, blockClass: r2, blockSelector: o2, sampling: s2 }) {
  return be("scroll", ke((s3) => {
    const i2 = tt(s3);
    if (!i2 || Ee(i2, r2, o2, true)) return;
    const a2 = n2.getId(i2);
    if (i2 === t2) {
      const n3 = t2.scrollingElement || t2.documentElement;
      e2({ id: a2, x: n3.scrollLeft, y: n3.scrollTop });
    } else e2({ id: a2, x: i2.scrollLeft, y: i2.scrollTop });
  }, s2.scroll || 100), t2);
}
function st(e2, t2) {
  const n2 = Object.assign({}, e2);
  return t2 || delete n2.userTriggered, n2;
}
var it = ["INPUT", "TEXTAREA", "SELECT"];
var at = /* @__PURE__ */ new WeakMap();
function lt(e2) {
  return function(e3, t2) {
    if (Xe && e3.parentRule instanceof CSSGroupingRule || qe && e3.parentRule instanceof CSSMediaRule || $e && e3.parentRule instanceof CSSSupportsRule || et && e3.parentRule instanceof CSSConditionRule) {
      const n2 = Array.from(e3.parentRule.cssRules).indexOf(e3);
      t2.unshift(n2);
    } else if (e3.parentStyleSheet) {
      const n2 = Array.from(e3.parentStyleSheet.cssRules).indexOf(e3);
      t2.unshift(n2);
    }
    return t2;
  }(e2, []);
}
function ct(e2, t2, n2) {
  let r2, o2;
  return e2 ? (e2.ownerNode ? r2 = t2.getId(e2.ownerNode) : o2 = n2.getId(e2), { styleId: o2, id: r2 }) : {};
}
function ut({ mirror: e2, stylesheetManager: t2 }, n2) {
  var r2, o2, s2;
  let i2 = null;
  i2 = "#document" === n2.nodeName ? e2.getId(n2) : e2.getId(n2.host);
  const a2 = "#document" === n2.nodeName ? null === (r2 = n2.defaultView) || void 0 === r2 ? void 0 : r2.Document : null === (s2 = null === (o2 = n2.ownerDocument) || void 0 === o2 ? void 0 : o2.defaultView) || void 0 === s2 ? void 0 : s2.ShadowRoot, l2 = Object.getOwnPropertyDescriptor(null == a2 ? void 0 : a2.prototype, "adoptedStyleSheets");
  return null !== i2 && -1 !== i2 && a2 && l2 ? (Object.defineProperty(n2, "adoptedStyleSheets", { configurable: l2.configurable, enumerable: l2.enumerable, get() {
    var e3;
    return null === (e3 = l2.get) || void 0 === e3 ? void 0 : e3.call(this);
  }, set(e3) {
    var n3;
    const r3 = null === (n3 = l2.set) || void 0 === n3 ? void 0 : n3.call(this, e3);
    if (null !== i2 && -1 !== i2) try {
      t2.adoptStyleSheets(e3, i2);
    } catch (e4) {
    }
    return r3;
  } }), () => {
    Object.defineProperty(n2, "adoptedStyleSheets", { configurable: l2.configurable, enumerable: l2.enumerable, get: l2.get, set: l2.set });
  }) : () => {
  };
}
function dt(e2, t2 = {}) {
  const n2 = e2.doc.defaultView;
  if (!n2) return () => {
  };
  !function(e3, t3) {
    const { mutationCb: n3, mousemoveCb: r3, mouseInteractionCb: o3, scrollCb: s3, viewportResizeCb: i3, inputCb: a3, mediaInteractionCb: l3, styleSheetRuleCb: c3, styleDeclarationCb: u3, canvasMutationCb: d3, fontCb: h3, selectionCb: p3 } = e3;
    e3.mutationCb = (...e4) => {
      t3.mutation && t3.mutation(...e4), n3(...e4);
    }, e3.mousemoveCb = (...e4) => {
      t3.mousemove && t3.mousemove(...e4), r3(...e4);
    }, e3.mouseInteractionCb = (...e4) => {
      t3.mouseInteraction && t3.mouseInteraction(...e4), o3(...e4);
    }, e3.scrollCb = (...e4) => {
      t3.scroll && t3.scroll(...e4), s3(...e4);
    }, e3.viewportResizeCb = (...e4) => {
      t3.viewportResize && t3.viewportResize(...e4), i3(...e4);
    }, e3.inputCb = (...e4) => {
      t3.input && t3.input(...e4), a3(...e4);
    }, e3.mediaInteractionCb = (...e4) => {
      t3.mediaInteaction && t3.mediaInteaction(...e4), l3(...e4);
    }, e3.styleSheetRuleCb = (...e4) => {
      t3.styleSheetRule && t3.styleSheetRule(...e4), c3(...e4);
    }, e3.styleDeclarationCb = (...e4) => {
      t3.styleDeclaration && t3.styleDeclaration(...e4), u3(...e4);
    }, e3.canvasMutationCb = (...e4) => {
      t3.canvasMutation && t3.canvasMutation(...e4), d3(...e4);
    }, e3.fontCb = (...e4) => {
      t3.font && t3.font(...e4), h3(...e4);
    }, e3.selectionCb = (...e4) => {
      t3.selection && t3.selection(...e4), p3(...e4);
    };
  }(e2, t2);
  const r2 = nt(e2, e2.doc), o2 = function({ mousemoveCb: e3, sampling: t3, doc: n3, mirror: r3 }) {
    if (false === t3.mousemove) return () => {
    };
    const o3 = "number" == typeof t3.mousemove ? t3.mousemove : 50, s3 = "number" == typeof t3.mousemoveCallback ? t3.mousemoveCallback : 500;
    let i3, a3 = [];
    const l3 = ke((t4) => {
      const n4 = Date.now() - i3;
      e3(a3.map((e4) => (e4.timeOffset -= n4, e4)), t4), a3 = [], i3 = null;
    }, s3), c3 = ke((e4) => {
      const t4 = tt(e4), { clientX: n4, clientY: o4 } = Fe(e4) ? e4.changedTouches[0] : e4;
      i3 || (i3 = Date.now()), a3.push({ x: n4, y: o4, id: r3.getId(t4), timeOffset: Date.now() - i3 }), l3("undefined" != typeof DragEvent && e4 instanceof DragEvent ? Ue.Drag : e4 instanceof MouseEvent ? Ue.MouseMove : Ue.TouchMove);
    }, o3, { trailing: false }), u3 = [be("mousemove", c3, n3), be("touchmove", c3, n3), be("drag", c3, n3)];
    return () => {
      u3.forEach((e4) => e4());
    };
  }(e2), s2 = rt(e2), i2 = ot(e2), a2 = function({ viewportResizeCb: e3 }) {
    let t3 = -1, n3 = -1;
    return be("resize", ke(() => {
      const r3 = xe(), o3 = Te();
      t3 === r3 && n3 === o3 || (e3({ width: Number(o3), height: Number(r3) }), t3 = r3, n3 = o3);
    }, 200), window);
  }(e2), l2 = function({ inputCb: e3, doc: t3, mirror: n3, blockClass: r3, blockSelector: o3, ignoreClass: s3, maskInputOptions: i3, maskInputFn: a3, sampling: l3, userTriggeredOnInput: c3 }) {
    function u3(e4) {
      let n4 = tt(e4);
      const l4 = e4.isTrusted;
      if (n4 && "OPTION" === n4.tagName && (n4 = n4.parentElement), !n4 || !n4.tagName || it.indexOf(n4.tagName) < 0 || Ee(n4, r3, o3, true)) return;
      const u4 = n4.type;
      if (n4.classList.contains(s3)) return;
      let h4 = n4.value, p4 = false;
      "radio" === u4 || "checkbox" === u4 ? p4 = n4.checked : (i3[n4.tagName.toLowerCase()] || i3[u4]) && (h4 = q({ maskInputOptions: i3, tagName: n4.tagName, type: u4, value: h4, maskInputFn: a3 })), d3(n4, st({ text: h4, isChecked: p4, userTriggered: l4 }, c3));
      const m4 = n4.name;
      "radio" === u4 && m4 && p4 && t3.querySelectorAll(`input[type="radio"][name="${m4}"]`).forEach((e5) => {
        e5 !== n4 && d3(e5, st({ text: e5.value, isChecked: !p4, userTriggered: false }, c3));
      });
    }
    function d3(t4, r4) {
      const o4 = at.get(t4);
      if (!o4 || o4.text !== r4.text || o4.isChecked !== r4.isChecked) {
        at.set(t4, r4);
        const o5 = n3.getId(t4);
        e3(Object.assign(Object.assign({}, r4), { id: o5 }));
      }
    }
    const h3 = ("last" === l3.input ? ["change"] : ["input", "change"]).map((e4) => be(e4, u3, t3)), p3 = t3.defaultView;
    if (!p3) return () => {
      h3.forEach((e4) => e4());
    };
    const m3 = p3.Object.getOwnPropertyDescriptor(p3.HTMLInputElement.prototype, "value"), g3 = [[p3.HTMLInputElement.prototype, "value"], [p3.HTMLInputElement.prototype, "checked"], [p3.HTMLSelectElement.prototype, "value"], [p3.HTMLTextAreaElement.prototype, "value"], [p3.HTMLSelectElement.prototype, "selectedIndex"], [p3.HTMLOptionElement.prototype, "selected"]];
    return m3 && m3.set && h3.push(...g3.map((e4) => we(e4[0], e4[1], { set() {
      u3({ target: this });
    } }, false, p3))), () => {
      h3.forEach((e4) => e4());
    };
  }(e2), c2 = function({ mediaInteractionCb: e3, blockClass: t3, blockSelector: n3, mirror: r3, sampling: o3 }) {
    const s3 = (s4) => ke((o4) => {
      const i4 = tt(o4);
      if (!i4 || Ee(i4, t3, n3, true)) return;
      const { currentTime: a3, volume: l3, muted: c3, playbackRate: u3 } = i4;
      e3({ type: s4, id: r3.getId(i4), currentTime: a3, volume: l3, muted: c3, playbackRate: u3 });
    }, o3.media || 500), i3 = [be("play", s3(0)), be("pause", s3(1)), be("seeked", s3(2)), be("volumechange", s3(3)), be("ratechange", s3(4))];
    return () => {
      i3.forEach((e4) => e4());
    };
  }(e2), u2 = function({ styleSheetRuleCb: e3, mirror: t3, stylesheetManager: n3 }, { win: r3 }) {
    const o3 = r3.CSSStyleSheet.prototype.insertRule;
    r3.CSSStyleSheet.prototype.insertRule = function(r4, s4) {
      const { id: i4, styleId: a4 } = ct(this, t3, n3.styleMirror);
      return (i4 && -1 !== i4 || a4 && -1 !== a4) && e3({ id: i4, styleId: a4, adds: [{ rule: r4, index: s4 }] }), o3.apply(this, [r4, s4]);
    };
    const s3 = r3.CSSStyleSheet.prototype.deleteRule;
    let i3, a3;
    r3.CSSStyleSheet.prototype.deleteRule = function(r4) {
      const { id: o4, styleId: i4 } = ct(this, t3, n3.styleMirror);
      return (o4 && -1 !== o4 || i4 && -1 !== i4) && e3({ id: o4, styleId: i4, removes: [{ index: r4 }] }), s3.apply(this, [r4]);
    }, r3.CSSStyleSheet.prototype.replace && (i3 = r3.CSSStyleSheet.prototype.replace, r3.CSSStyleSheet.prototype.replace = function(r4) {
      const { id: o4, styleId: s4 } = ct(this, t3, n3.styleMirror);
      return (o4 && -1 !== o4 || s4 && -1 !== s4) && e3({ id: o4, styleId: s4, replace: r4 }), i3.apply(this, [r4]);
    }), r3.CSSStyleSheet.prototype.replaceSync && (a3 = r3.CSSStyleSheet.prototype.replaceSync, r3.CSSStyleSheet.prototype.replaceSync = function(r4) {
      const { id: o4, styleId: s4 } = ct(this, t3, n3.styleMirror);
      return (o4 && -1 !== o4 || s4 && -1 !== s4) && e3({ id: o4, styleId: s4, replaceSync: r4 }), a3.apply(this, [r4]);
    });
    const l3 = {};
    Xe ? l3.CSSGroupingRule = r3.CSSGroupingRule : (qe && (l3.CSSMediaRule = r3.CSSMediaRule), et && (l3.CSSConditionRule = r3.CSSConditionRule), $e && (l3.CSSSupportsRule = r3.CSSSupportsRule));
    const c3 = {};
    return Object.entries(l3).forEach(([r4, o4]) => {
      c3[r4] = { insertRule: o4.prototype.insertRule, deleteRule: o4.prototype.deleteRule }, o4.prototype.insertRule = function(o5, s4) {
        const { id: i4, styleId: a4 } = ct(this.parentStyleSheet, t3, n3.styleMirror);
        return (i4 && -1 !== i4 || a4 && -1 !== a4) && e3({ id: i4, styleId: a4, adds: [{ rule: o5, index: [...lt(this), s4 || 0] }] }), c3[r4].insertRule.apply(this, [o5, s4]);
      }, o4.prototype.deleteRule = function(o5) {
        const { id: s4, styleId: i4 } = ct(this.parentStyleSheet, t3, n3.styleMirror);
        return (s4 && -1 !== s4 || i4 && -1 !== i4) && e3({ id: s4, styleId: i4, removes: [{ index: [...lt(this), o5] }] }), c3[r4].deleteRule.apply(this, [o5]);
      };
    }), () => {
      r3.CSSStyleSheet.prototype.insertRule = o3, r3.CSSStyleSheet.prototype.deleteRule = s3, i3 && (r3.CSSStyleSheet.prototype.replace = i3), a3 && (r3.CSSStyleSheet.prototype.replaceSync = a3), Object.entries(l3).forEach(([e4, t4]) => {
        t4.prototype.insertRule = c3[e4].insertRule, t4.prototype.deleteRule = c3[e4].deleteRule;
      });
    };
  }(e2, { win: n2 }), d2 = ut(e2, e2.doc), h2 = function({ styleDeclarationCb: e3, mirror: t3, ignoreCSSAttributes: n3, stylesheetManager: r3 }, { win: o3 }) {
    const s3 = o3.CSSStyleDeclaration.prototype.setProperty;
    o3.CSSStyleDeclaration.prototype.setProperty = function(o4, i4, a3) {
      var l3;
      if (n3.has(o4)) return s3.apply(this, [o4, i4, a3]);
      const { id: c3, styleId: u3 } = ct(null === (l3 = this.parentRule) || void 0 === l3 ? void 0 : l3.parentStyleSheet, t3, r3.styleMirror);
      return (c3 && -1 !== c3 || u3 && -1 !== u3) && e3({ id: c3, styleId: u3, set: { property: o4, value: i4, priority: a3 }, index: lt(this.parentRule) }), s3.apply(this, [o4, i4, a3]);
    };
    const i3 = o3.CSSStyleDeclaration.prototype.removeProperty;
    return o3.CSSStyleDeclaration.prototype.removeProperty = function(o4) {
      var s4;
      if (n3.has(o4)) return i3.apply(this, [o4]);
      const { id: a3, styleId: l3 } = ct(null === (s4 = this.parentRule) || void 0 === s4 ? void 0 : s4.parentStyleSheet, t3, r3.styleMirror);
      return (a3 && -1 !== a3 || l3 && -1 !== l3) && e3({ id: a3, styleId: l3, remove: { property: o4 }, index: lt(this.parentRule) }), i3.apply(this, [o4]);
    }, () => {
      o3.CSSStyleDeclaration.prototype.setProperty = s3, o3.CSSStyleDeclaration.prototype.removeProperty = i3;
    };
  }(e2, { win: n2 }), p2 = e2.collectFonts ? function({ fontCb: e3, doc: t3 }) {
    const n3 = t3.defaultView;
    if (!n3) return () => {
    };
    const r3 = [], o3 = /* @__PURE__ */ new WeakMap(), s3 = n3.FontFace;
    n3.FontFace = function(e4, t4, n4) {
      const r4 = new s3(e4, t4, n4);
      return o3.set(r4, { family: e4, buffer: "string" != typeof t4, descriptors: n4, fontSource: "string" == typeof t4 ? t4 : JSON.stringify(Array.from(new Uint8Array(t4))) }), r4;
    };
    const i3 = Me(t3.fonts, "add", function(t4) {
      return function(n4) {
        return setTimeout(() => {
          const t5 = o3.get(n4);
          t5 && (e3(t5), o3.delete(n4));
        }, 0), t4.apply(this, [n4]);
      };
    });
    return r3.push(() => {
      n3.FontFace = s3;
    }), r3.push(i3), () => {
      r3.forEach((e4) => e4());
    };
  }(e2) : () => {
  }, m2 = function(e3) {
    const { doc: t3, mirror: n3, blockClass: r3, blockSelector: o3, selectionCb: s3 } = e3;
    let i3 = true;
    const a3 = () => {
      const e4 = t3.getSelection();
      if (!e4 || i3 && (null == e4 ? void 0 : e4.isCollapsed)) return;
      i3 = e4.isCollapsed || false;
      const a4 = [], l3 = e4.rangeCount || 0;
      for (let t4 = 0; t4 < l3; t4++) {
        const s4 = e4.getRangeAt(t4), { startContainer: i4, startOffset: l4, endContainer: c3, endOffset: u3 } = s4;
        Ee(i4, r3, o3, true) || Ee(c3, r3, o3, true) || a4.push({ start: n3.getId(i4), startOffset: l4, end: n3.getId(c3), endOffset: u3 });
      }
      s3({ ranges: a4 });
    };
    return a3(), be("selectionchange", a3);
  }(e2), g2 = [];
  for (const t3 of e2.plugins) g2.push(t3.observer(t3.callback, n2, t3.options));
  return () => {
    Qe.forEach((e3) => e3.reset()), r2.disconnect(), o2(), s2(), i2(), a2(), l2(), c2(), u2(), d2(), h2(), p2(), m2(), g2.forEach((e3) => e3());
  };
}
var ht = class {
  constructor(e2) {
    this.generateIdFn = e2, this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap(), this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap();
  }
  getId(e2, t2, n2, r2) {
    const o2 = n2 || this.getIdToRemoteIdMap(e2), s2 = r2 || this.getRemoteIdToIdMap(e2);
    let i2 = o2.get(t2);
    return i2 || (i2 = this.generateIdFn(), o2.set(t2, i2), s2.set(i2, t2)), i2;
  }
  getIds(e2, t2) {
    const n2 = this.getIdToRemoteIdMap(e2), r2 = this.getRemoteIdToIdMap(e2);
    return t2.map((t3) => this.getId(e2, t3, n2, r2));
  }
  getRemoteId(e2, t2, n2) {
    const r2 = n2 || this.getRemoteIdToIdMap(e2);
    if ("number" != typeof t2) return t2;
    const o2 = r2.get(t2);
    return o2 || -1;
  }
  getRemoteIds(e2, t2) {
    const n2 = this.getRemoteIdToIdMap(e2);
    return t2.map((t3) => this.getRemoteId(e2, t3, n2));
  }
  reset(e2) {
    if (!e2) return this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap(), void (this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap());
    this.iframeIdToRemoteIdMap.delete(e2), this.iframeRemoteIdToIdMap.delete(e2);
  }
  getIdToRemoteIdMap(e2) {
    let t2 = this.iframeIdToRemoteIdMap.get(e2);
    return t2 || (t2 = /* @__PURE__ */ new Map(), this.iframeIdToRemoteIdMap.set(e2, t2)), t2;
  }
  getRemoteIdToIdMap(e2) {
    let t2 = this.iframeRemoteIdToIdMap.get(e2);
    return t2 || (t2 = /* @__PURE__ */ new Map(), this.iframeRemoteIdToIdMap.set(e2, t2)), t2;
  }
};
var pt = class {
  constructor(e2) {
    this.iframes = /* @__PURE__ */ new WeakMap(), this.crossOriginIframeMap = /* @__PURE__ */ new WeakMap(), this.crossOriginIframeMirror = new ht(se), this.mutationCb = e2.mutationCb, this.wrappedEmit = e2.wrappedEmit, this.stylesheetManager = e2.stylesheetManager, this.recordCrossOriginIframes = e2.recordCrossOriginIframes, this.crossOriginIframeStyleMirror = new ht(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)), this.mirror = e2.mirror, this.recordCrossOriginIframes && window.addEventListener("message", this.handleMessage.bind(this));
  }
  addIframe(e2) {
    this.iframes.set(e2, true), e2.contentWindow && this.crossOriginIframeMap.set(e2.contentWindow, e2);
  }
  addLoadListener(e2) {
    this.loadListener = e2;
  }
  attachIframe(e2, t2) {
    var n2;
    this.mutationCb({ adds: [{ parentId: this.mirror.getId(e2), nextId: null, node: t2 }], removes: [], texts: [], attributes: [], isAttachIframe: true }), null === (n2 = this.loadListener) || void 0 === n2 || n2.call(this, e2), e2.contentDocument && e2.contentDocument.adoptedStyleSheets && e2.contentDocument.adoptedStyleSheets.length > 0 && this.stylesheetManager.adoptStyleSheets(e2.contentDocument.adoptedStyleSheets, this.mirror.getId(e2.contentDocument));
  }
  handleMessage(e2) {
    if ("rrweb" === e2.data.type) {
      if (!e2.source) return;
      const t2 = this.crossOriginIframeMap.get(e2.source);
      if (!t2) return;
      const n2 = this.transformCrossOriginEvent(t2, e2.data.event);
      n2 && this.wrappedEmit(n2, e2.data.isCheckout);
    }
  }
  transformCrossOriginEvent(e2, t2) {
    var n2;
    switch (t2.type) {
      case We.FullSnapshot:
        return this.crossOriginIframeMirror.reset(e2), this.crossOriginIframeStyleMirror.reset(e2), this.replaceIdOnNode(t2.data.node, e2), { timestamp: t2.timestamp, type: We.IncrementalSnapshot, data: { source: Ue.Mutation, adds: [{ parentId: this.mirror.getId(e2), nextId: null, node: t2.data.node }], removes: [], texts: [], attributes: [], isAttachIframe: true } };
      case We.Meta:
      case We.Load:
      case We.DomContentLoaded:
        return false;
      case We.Plugin:
        return t2;
      case We.Custom:
        return this.replaceIds(t2.data.payload, e2, ["id", "parentId", "previousId", "nextId"]), t2;
      case We.IncrementalSnapshot:
        switch (t2.data.source) {
          case Ue.Mutation:
            return t2.data.adds.forEach((t3) => {
              this.replaceIds(t3, e2, ["parentId", "nextId", "previousId"]), this.replaceIdOnNode(t3.node, e2);
            }), t2.data.removes.forEach((t3) => {
              this.replaceIds(t3, e2, ["parentId", "id"]);
            }), t2.data.attributes.forEach((t3) => {
              this.replaceIds(t3, e2, ["id"]);
            }), t2.data.texts.forEach((t3) => {
              this.replaceIds(t3, e2, ["id"]);
            }), t2;
          case Ue.Drag:
          case Ue.TouchMove:
          case Ue.MouseMove:
            return t2.data.positions.forEach((t3) => {
              this.replaceIds(t3, e2, ["id"]);
            }), t2;
          case Ue.ViewportResize:
            return false;
          case Ue.MediaInteraction:
          case Ue.MouseInteraction:
          case Ue.Scroll:
          case Ue.CanvasMutation:
          case Ue.Input:
            return this.replaceIds(t2.data, e2, ["id"]), t2;
          case Ue.StyleSheetRule:
          case Ue.StyleDeclaration:
            return this.replaceIds(t2.data, e2, ["id"]), this.replaceStyleIds(t2.data, e2, ["styleId"]), t2;
          case Ue.Font:
            return t2;
          case Ue.Selection:
            return t2.data.ranges.forEach((t3) => {
              this.replaceIds(t3, e2, ["start", "end"]);
            }), t2;
          case Ue.AdoptedStyleSheet:
            return this.replaceIds(t2.data, e2, ["id"]), this.replaceStyleIds(t2.data, e2, ["styleIds"]), null === (n2 = t2.data.styles) || void 0 === n2 || n2.forEach((t3) => {
              this.replaceStyleIds(t3, e2, ["styleId"]);
            }), t2;
        }
    }
  }
  replace(e2, t2, n2, r2) {
    for (const o2 of r2) (Array.isArray(t2[o2]) || "number" == typeof t2[o2]) && (Array.isArray(t2[o2]) ? t2[o2] = e2.getIds(n2, t2[o2]) : t2[o2] = e2.getId(n2, t2[o2]));
    return t2;
  }
  replaceIds(e2, t2, n2) {
    return this.replace(this.crossOriginIframeMirror, e2, t2, n2);
  }
  replaceStyleIds(e2, t2, n2) {
    return this.replace(this.crossOriginIframeStyleMirror, e2, t2, n2);
  }
  replaceIdOnNode(e2, t2) {
    this.replaceIds(e2, t2, ["id"]), "childNodes" in e2 && e2.childNodes.forEach((e3) => {
      this.replaceIdOnNode(e3, t2);
    });
  }
};
var mt = class {
  constructor(e2) {
    this.shadowDoms = /* @__PURE__ */ new WeakSet(), this.restorePatches = [], this.mutationCb = e2.mutationCb, this.scrollCb = e2.scrollCb, this.bypassOptions = e2.bypassOptions, this.mirror = e2.mirror;
    const t2 = this;
    this.restorePatches.push(Me(Element.prototype, "attachShadow", function(e3) {
      return function(n2) {
        const r2 = e3.call(this, n2);
        return this.shadowRoot && t2.addShadowRoot(this.shadowRoot, this.ownerDocument), r2;
      };
    }));
  }
  addShadowRoot(e2, t2) {
    J(e2) && (this.shadowDoms.has(e2) || (this.shadowDoms.add(e2), nt(Object.assign(Object.assign({}, this.bypassOptions), { doc: t2, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), e2), ot(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: e2, mirror: this.mirror })), setTimeout(() => {
      e2.adoptedStyleSheets && e2.adoptedStyleSheets.length > 0 && this.bypassOptions.stylesheetManager.adoptStyleSheets(e2.adoptedStyleSheets, this.mirror.getId(e2.host)), ut({ mirror: this.mirror, stylesheetManager: this.bypassOptions.stylesheetManager }, e2);
    }, 0)));
  }
  observeAttachShadow(e2) {
    if (e2.contentWindow) {
      const t2 = this;
      this.restorePatches.push(Me(e2.contentWindow.HTMLElement.prototype, "attachShadow", function(n2) {
        return function(r2) {
          const o2 = n2.call(this, r2);
          return this.shadowRoot && t2.addShadowRoot(this.shadowRoot, e2.contentDocument), o2;
        };
      }));
    }
  }
  reset() {
    this.restorePatches.forEach((e2) => e2()), this.shadowDoms = /* @__PURE__ */ new WeakSet();
  }
};
function gt(e2, t2, n2, r2) {
  return new (n2 || (n2 = Promise))(function(o2, s2) {
    function i2(e3) {
      try {
        l2(r2.next(e3));
      } catch (e4) {
        s2(e4);
      }
    }
    function a2(e3) {
      try {
        l2(r2.throw(e3));
      } catch (e4) {
        s2(e4);
      }
    }
    function l2(e3) {
      var t3;
      e3.done ? o2(e3.value) : (t3 = e3.value, t3 instanceof n2 ? t3 : new n2(function(e4) {
        e4(t3);
      })).then(i2, a2);
    }
    l2((r2 = r2.apply(e2, t2 || [])).next());
  });
}
for (ft = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", It = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), Ct = 0; Ct < 64; Ct++) It[ft.charCodeAt(Ct)] = Ct;
var ft;
var It;
var Ct;
var yt = /* @__PURE__ */ new Map();
var vt = (e2, t2, n2) => {
  if (!e2 || !At(e2, t2) && "object" != typeof e2) return;
  const r2 = function(e3, t3) {
    let n3 = yt.get(e3);
    return n3 || (n3 = /* @__PURE__ */ new Map(), yt.set(e3, n3)), n3.has(t3) || n3.set(t3, []), n3.get(t3);
  }(n2, e2.constructor.name);
  let o2 = r2.indexOf(e2);
  return -1 === o2 && (o2 = r2.length, r2.push(e2)), o2;
};
function bt(e2, t2, n2) {
  if (e2 instanceof Array) return e2.map((e3) => bt(e3, t2, n2));
  if (null === e2) return e2;
  if (e2 instanceof Float32Array || e2 instanceof Float64Array || e2 instanceof Int32Array || e2 instanceof Uint32Array || e2 instanceof Uint8Array || e2 instanceof Uint16Array || e2 instanceof Int16Array || e2 instanceof Int8Array || e2 instanceof Uint8ClampedArray) {
    return { rr_type: e2.constructor.name, args: [Object.values(e2)] };
  }
  if (e2 instanceof ArrayBuffer) {
    const t3 = e2.constructor.name, n3 = function(e3) {
      var t4, n4 = new Uint8Array(e3), r2 = n4.length, o2 = "";
      for (t4 = 0; t4 < r2; t4 += 3) o2 += ft[n4[t4] >> 2], o2 += ft[(3 & n4[t4]) << 4 | n4[t4 + 1] >> 4], o2 += ft[(15 & n4[t4 + 1]) << 2 | n4[t4 + 2] >> 6], o2 += ft[63 & n4[t4 + 2]];
      return r2 % 3 == 2 ? o2 = o2.substring(0, o2.length - 1) + "=" : r2 % 3 == 1 && (o2 = o2.substring(0, o2.length - 2) + "=="), o2;
    }(e2);
    return { rr_type: t3, base64: n3 };
  }
  if (e2 instanceof DataView) {
    return { rr_type: e2.constructor.name, args: [bt(e2.buffer, t2, n2), e2.byteOffset, e2.byteLength] };
  }
  if (e2 instanceof HTMLImageElement) {
    const t3 = e2.constructor.name, { src: n3 } = e2;
    return { rr_type: t3, src: n3 };
  }
  if (e2 instanceof HTMLCanvasElement) {
    return { rr_type: "HTMLImageElement", src: e2.toDataURL() };
  }
  if (e2 instanceof ImageData) {
    return { rr_type: e2.constructor.name, args: [bt(e2.data, t2, n2), e2.width, e2.height] };
  }
  if (At(e2, t2) || "object" == typeof e2) {
    return { rr_type: e2.constructor.name, index: vt(e2, t2, n2) };
  }
  return e2;
}
var St = (e2, t2, n2) => [...e2].map((e3) => bt(e3, t2, n2));
var At = (e2, t2) => {
  const n2 = ["WebGLActiveInfo", "WebGLBuffer", "WebGLFramebuffer", "WebGLProgram", "WebGLRenderbuffer", "WebGLShader", "WebGLShaderPrecisionFormat", "WebGLTexture", "WebGLUniformLocation", "WebGLVertexArrayObject", "WebGLVertexArrayObjectOES"].filter((e3) => "function" == typeof t2[e3]);
  return Boolean(n2.find((n3) => e2 instanceof t2[n3]));
};
function kt(e2, t2, n2) {
  const r2 = [];
  try {
    const o2 = Me(e2.HTMLCanvasElement.prototype, "getContext", function(e3) {
      return function(r3, ...o3) {
        return Ee(this, t2, n2, true) || "__context" in this || (this.__context = r3), e3.apply(this, [r3, ...o3]);
      };
    });
    r2.push(o2);
  } catch (e3) {
    console.error("failed to patch HTMLCanvasElement.prototype.getContext");
  }
  return () => {
    r2.forEach((e3) => e3());
  };
}
function wt(e2, t2, n2, r2, o2, s2, i2) {
  const a2 = [], l2 = Object.getOwnPropertyNames(e2);
  for (const s3 of l2) if (!["isContextLost", "canvas", "drawingBufferWidth", "drawingBufferHeight"].includes(s3)) try {
    if ("function" != typeof e2[s3]) continue;
    const l3 = Me(e2, s3, function(e3) {
      return function(...a3) {
        const l4 = e3.apply(this, a3);
        if (vt(l4, i2, this), !Ee(this.canvas, r2, o2, true)) {
          const e4 = St([...a3], i2, this), r3 = { type: t2, property: s3, args: e4 };
          n2(this.canvas, r3);
        }
        return l4;
      };
    });
    a2.push(l3);
  } catch (r3) {
    const o3 = we(e2, s3, { set(e3) {
      n2(this.canvas, { type: t2, property: s3, args: [e3], setter: true });
    } });
    a2.push(o3);
  }
  return a2;
}
var Mt = null;
try {
  xt = "undefined" != typeof module && module.require("worker_threads") || "function" == typeof __non_webpack_require__ && __non_webpack_require__("worker_threads") || require_worker_threads();
  Mt = xt.Worker;
} catch (e2) {
}
var xt;
function Tt(e2, t2, n2) {
  var r2 = void 0 === t2 ? null : t2, o2 = function(e3, t3) {
    return Buffer.from(e3, "base64").toString(t3 ? "utf16" : "utf8");
  }(e2, void 0 !== n2 && n2), s2 = o2.indexOf("\n", 10) + 1, i2 = o2.substring(s2) + (r2 ? "//# sourceMappingURL=" + r2 : "");
  return function(e3) {
    return new Mt(i2, Object.assign({}, e3, { eval: true }));
  };
}
function Et(e2, t2, n2) {
  var r2 = void 0 === t2 ? null : t2, o2 = function(e3, t3) {
    var n3 = atob(e3);
    if (t3) {
      for (var r3 = new Uint8Array(n3.length), o3 = 0, s3 = n3.length; o3 < s3; ++o3) r3[o3] = n3.charCodeAt(o3);
      return String.fromCharCode.apply(null, new Uint16Array(r3.buffer));
    }
    return n3;
  }(e2, void 0 !== n2 && n2), s2 = o2.indexOf("\n", 10) + 1, i2 = o2.substring(s2) + (r2 ? "//# sourceMappingURL=" + r2 : ""), a2 = new Blob([i2], { type: "application/javascript" });
  return URL.createObjectURL(a2);
}
var Nt = "[object process]" === Object.prototype.toString.call("undefined" != typeof process ? process : 0);
var Rt;
var Ft;
var Ot;
var Lt = (Rt = "Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=", Ft = null, Ot = false, Nt ? Tt(Rt, Ft, Ot) : /* @__PURE__ */ function(e2, t2, n2) {
  var r2;
  return function(o2) {
    return r2 = r2 || Et(e2, t2, n2), new Worker(r2, o2);
  };
}(Rt, Ft, Ot));
var Dt = class {
  constructor(e2) {
    this.pendingCanvasMutations = /* @__PURE__ */ new Map(), this.rafStamps = { latestId: 0, invokeId: null }, this.frozen = false, this.locked = false, this.processMutation = (e3, t3) => {
      !(this.rafStamps.invokeId && this.rafStamps.latestId !== this.rafStamps.invokeId) && this.rafStamps.invokeId || (this.rafStamps.invokeId = this.rafStamps.latestId), this.pendingCanvasMutations.has(e3) || this.pendingCanvasMutations.set(e3, []), this.pendingCanvasMutations.get(e3).push(t3);
    };
    const { sampling: t2 = "all", win: n2, blockClass: r2, blockSelector: o2, recordCanvas: s2, dataURLOptions: i2 } = e2;
    this.mutationCb = e2.mutationCb, this.mirror = e2.mirror, s2 && "all" === t2 && this.initCanvasMutationObserver(n2, r2, o2), s2 && "number" == typeof t2 && this.initCanvasFPSObserver(t2, n2, r2, o2, { dataURLOptions: i2 });
  }
  reset() {
    this.pendingCanvasMutations.clear(), this.resetObservers && this.resetObservers();
  }
  freeze() {
    this.frozen = true;
  }
  unfreeze() {
    this.frozen = false;
  }
  lock() {
    this.locked = true;
  }
  unlock() {
    this.locked = false;
  }
  initCanvasFPSObserver(e2, t2, n2, r2, o2) {
    const s2 = kt(t2, n2, r2), i2 = /* @__PURE__ */ new Map(), a2 = new Lt();
    a2.onmessage = (e3) => {
      const { id: t3 } = e3.data;
      if (i2.set(t3, false), !("base64" in e3.data)) return;
      const { base64: n3, type: r3, width: o3, height: s3 } = e3.data;
      this.mutationCb({ id: t3, type: Ge["2D"], commands: [{ property: "clearRect", args: [0, 0, o3, s3] }, { property: "drawImage", args: [{ rr_type: "ImageBitmap", args: [{ rr_type: "Blob", data: [{ rr_type: "ArrayBuffer", base64: n3 }], type: r3 }] }, 0, 0] }] });
    };
    const l2 = 1e3 / e2;
    let c2, u2 = 0;
    const d2 = (e3) => {
      u2 && e3 - u2 < l2 || (u2 = e3, (() => {
        const e4 = [];
        return t2.document.querySelectorAll("canvas").forEach((t3) => {
          Ee(t3, n2, r2, true) || e4.push(t3);
        }), e4;
      })().forEach((e4) => gt(this, void 0, void 0, function* () {
        var t3;
        const n3 = this.mirror.getId(e4);
        if (i2.get(n3)) return;
        if (i2.set(n3, true), ["webgl", "webgl2"].includes(e4.__context)) {
          const n4 = e4.getContext(e4.__context);
          false === (null === (t3 = null == n4 ? void 0 : n4.getContextAttributes()) || void 0 === t3 ? void 0 : t3.preserveDrawingBuffer) && (null == n4 || n4.clear(n4.COLOR_BUFFER_BIT));
        }
        const r3 = yield createImageBitmap(e4);
        a2.postMessage({ id: n3, bitmap: r3, width: e4.width, height: e4.height, dataURLOptions: o2.dataURLOptions }, [r3]);
      }))), c2 = requestAnimationFrame(d2);
    };
    c2 = requestAnimationFrame(d2), this.resetObservers = () => {
      s2(), cancelAnimationFrame(c2);
    };
  }
  initCanvasMutationObserver(e2, t2, n2) {
    this.startRAFTimestamping(), this.startPendingCanvasMutationFlusher();
    const r2 = kt(e2, t2, n2), o2 = function(e3, t3, n3, r3) {
      const o3 = [], s3 = Object.getOwnPropertyNames(t3.CanvasRenderingContext2D.prototype);
      for (const i2 of s3) try {
        if ("function" != typeof t3.CanvasRenderingContext2D.prototype[i2]) continue;
        const s4 = Me(t3.CanvasRenderingContext2D.prototype, i2, function(o4) {
          return function(...s5) {
            return Ee(this.canvas, n3, r3, true) || setTimeout(() => {
              const n4 = St([...s5], t3, this);
              e3(this.canvas, { type: Ge["2D"], property: i2, args: n4 });
            }, 0), o4.apply(this, s5);
          };
        });
        o3.push(s4);
      } catch (n4) {
        const r4 = we(t3.CanvasRenderingContext2D.prototype, i2, { set(t4) {
          e3(this.canvas, { type: Ge["2D"], property: i2, args: [t4], setter: true });
        } });
        o3.push(r4);
      }
      return () => {
        o3.forEach((e4) => e4());
      };
    }(this.processMutation.bind(this), e2, t2, n2), s2 = function(e3, t3, n3, r3) {
      const o3 = [];
      return o3.push(...wt(t3.WebGLRenderingContext.prototype, Ge.WebGL, e3, n3, r3, 0, t3)), void 0 !== t3.WebGL2RenderingContext && o3.push(...wt(t3.WebGL2RenderingContext.prototype, Ge.WebGL2, e3, n3, r3, 0, t3)), () => {
        o3.forEach((e4) => e4());
      };
    }(this.processMutation.bind(this), e2, t2, n2, this.mirror);
    this.resetObservers = () => {
      r2(), o2(), s2();
    };
  }
  startPendingCanvasMutationFlusher() {
    requestAnimationFrame(() => this.flushPendingCanvasMutations());
  }
  startRAFTimestamping() {
    const e2 = (t2) => {
      this.rafStamps.latestId = t2, requestAnimationFrame(e2);
    };
    requestAnimationFrame(e2);
  }
  flushPendingCanvasMutations() {
    this.pendingCanvasMutations.forEach((e2, t2) => {
      const n2 = this.mirror.getId(t2);
      this.flushPendingCanvasMutationFor(t2, n2);
    }), requestAnimationFrame(() => this.flushPendingCanvasMutations());
  }
  flushPendingCanvasMutationFor(e2, t2) {
    if (this.frozen || this.locked) return;
    const n2 = this.pendingCanvasMutations.get(e2);
    if (!n2 || -1 === t2) return;
    const r2 = n2.map((e3) => {
      const t3 = function(e4, t4) {
        var n3 = {};
        for (var r3 in e4) Object.prototype.hasOwnProperty.call(e4, r3) && t4.indexOf(r3) < 0 && (n3[r3] = e4[r3]);
        if (null != e4 && "function" == typeof Object.getOwnPropertySymbols) {
          var o3 = 0;
          for (r3 = Object.getOwnPropertySymbols(e4); o3 < r3.length; o3++) t4.indexOf(r3[o3]) < 0 && Object.prototype.propertyIsEnumerable.call(e4, r3[o3]) && (n3[r3[o3]] = e4[r3[o3]]);
        }
        return n3;
      }(e3, ["type"]);
      return t3;
    }), { type: o2 } = n2[0];
    this.mutationCb({ id: t2, type: o2, commands: r2 }), this.pendingCanvasMutations.delete(e2);
  }
};
var Bt = class {
  constructor(e2) {
    this.trackedLinkElements = /* @__PURE__ */ new WeakSet(), this.styleMirror = new Be(), this.mutationCb = e2.mutationCb, this.adoptedStyleSheetCb = e2.adoptedStyleSheetCb;
  }
  attachLinkElement(e2, t2) {
    "_cssText" in t2.attributes && this.mutationCb({ adds: [], removes: [], texts: [], attributes: [{ id: t2.id, attributes: t2.attributes }] }), this.trackLinkElement(e2);
  }
  trackLinkElement(e2) {
    this.trackedLinkElements.has(e2) || (this.trackedLinkElements.add(e2), this.trackStylesheetInLinkElement(e2));
  }
  adoptStyleSheets(e2, t2) {
    if (0 === e2.length) return;
    const n2 = { id: t2, styleIds: [] }, r2 = [];
    for (const t3 of e2) {
      let e3;
      if (this.styleMirror.has(t3)) e3 = this.styleMirror.getId(t3);
      else {
        e3 = this.styleMirror.add(t3);
        const n3 = Array.from(t3.rules || CSSRule);
        r2.push({ styleId: e3, rules: n3.map((e4, t4) => ({ rule: Q(e4), index: t4 })) });
      }
      n2.styleIds.push(e3);
    }
    r2.length > 0 && (n2.styles = r2), this.adoptedStyleSheetCb(n2);
  }
  reset() {
    this.styleMirror.reset(), this.trackedLinkElements = /* @__PURE__ */ new WeakSet();
  }
  trackStylesheetInLinkElement(e2) {
  }
};
function Wt(e2) {
  return Object.assign(Object.assign({}, e2), { timestamp: Date.now() });
}
var Ut;
var Zt;
var Gt;
var Vt = false;
var Kt = new X();
function _t(e2 = {}) {
  const { emit: t2, checkoutEveryNms: n2, checkoutEveryNth: r2, blockClass: o2 = "rr-block", blockSelector: s2 = null, ignoreClass: i2 = "rr-ignore", maskTextClass: a2 = "rr-mask", maskTextSelector: l2 = null, inlineStylesheet: c2 = true, maskAllInputs: u2, maskInputOptions: d2, slimDOMOptions: h2, maskInputFn: p2, maskTextFn: m2, hooks: g2, packFn: f2, sampling: I2 = {}, dataURLOptions: C2 = {}, mousemoveWait: y2, recordCanvas: v2 = false, recordCrossOriginIframes: b2 = false, userTriggeredOnInput: S2 = false, collectFonts: A2 = false, inlineImages: k2 = false, plugins: w2, keepIframeSrcFn: M2 = () => false, ignoreCSSAttributes: x2 = /* @__PURE__ */ new Set([]) } = e2, T2 = !b2 || window.parent === window;
  let E2 = false;
  if (!T2) try {
    window.parent.document, E2 = false;
  } catch (e3) {
    E2 = true;
  }
  if (T2 && !t2) throw new Error("emit function is required");
  void 0 !== y2 && void 0 === I2.mousemove && (I2.mousemove = y2), Kt.reset();
  const N2 = true === u2 ? { color: true, date: true, "datetime-local": true, email: true, month: true, number: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true, textarea: true, select: true, password: true } : void 0 !== d2 ? d2 : { password: true }, R2 = true === h2 || "all" === h2 ? { script: true, comment: true, headFavicon: true, headWhitespace: true, headMetaSocial: true, headMetaRobots: true, headMetaHttpEquiv: true, headMetaVerification: true, headMetaAuthorship: "all" === h2, headMetaDescKeywords: "all" === h2 } : h2 || {};
  let F2;
  !function(e3 = window) {
    "NodeList" in e3 && !e3.NodeList.prototype.forEach && (e3.NodeList.prototype.forEach = Array.prototype.forEach), "DOMTokenList" in e3 && !e3.DOMTokenList.prototype.forEach && (e3.DOMTokenList.prototype.forEach = Array.prototype.forEach), Node.prototype.contains || (Node.prototype.contains = (...e4) => {
      let t3 = e4[0];
      if (!(0 in e4)) throw new TypeError("1 argument is required");
      do {
        if (this === t3) return true;
      } while (t3 = t3 && t3.parentNode);
      return false;
    });
  }();
  let O2 = 0;
  const L2 = (e3) => {
    for (const t3 of w2 || []) t3.eventProcessor && (e3 = t3.eventProcessor(e3));
    return f2 && (e3 = f2(e3)), e3;
  };
  Ut = (e3, o3) => {
    var s3;
    if (!(null === (s3 = Qe[0]) || void 0 === s3 ? void 0 : s3.isFrozen()) || e3.type === We.FullSnapshot || e3.type === We.IncrementalSnapshot && e3.data.source === Ue.Mutation || Qe.forEach((e4) => e4.unfreeze()), T2) null == t2 || t2(L2(e3), o3);
    else if (E2) {
      const t3 = { type: "rrweb", event: L2(e3), isCheckout: o3 };
      window.parent.postMessage(t3, "*");
    }
    if (e3.type === We.FullSnapshot) F2 = e3, O2 = 0;
    else if (e3.type === We.IncrementalSnapshot) {
      if (e3.data.source === Ue.Mutation && e3.data.isAttachIframe) return;
      O2++;
      const t3 = r2 && O2 >= r2, o4 = n2 && e3.timestamp - F2.timestamp > n2;
      (t3 || o4) && Zt(true);
    }
  };
  const D2 = (e3) => {
    Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.Mutation }, e3) }));
  }, B2 = (e3) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.Scroll }, e3) })), W2 = (e3) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.CanvasMutation }, e3) })), U2 = new Bt({ mutationCb: D2, adoptedStyleSheetCb: (e3) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.AdoptedStyleSheet }, e3) })) }), Z2 = new pt({ mirror: Kt, mutationCb: D2, stylesheetManager: U2, recordCrossOriginIframes: b2, wrappedEmit: Ut });
  for (const e3 of w2 || []) e3.getMirror && e3.getMirror({ nodeMirror: Kt, crossOriginIframeMirror: Z2.crossOriginIframeMirror, crossOriginIframeStyleMirror: Z2.crossOriginIframeStyleMirror });
  Gt = new Dt({ recordCanvas: v2, mutationCb: W2, win: window, blockClass: o2, blockSelector: s2, mirror: Kt, sampling: I2.canvas, dataURLOptions: C2 });
  const G2 = new mt({ mutationCb: D2, scrollCb: B2, bypassOptions: { blockClass: o2, blockSelector: s2, maskTextClass: a2, maskTextSelector: l2, inlineStylesheet: c2, maskInputOptions: N2, dataURLOptions: C2, maskTextFn: m2, maskInputFn: p2, recordCanvas: v2, inlineImages: k2, sampling: I2, slimDOMOptions: R2, iframeManager: Z2, stylesheetManager: U2, canvasManager: Gt, keepIframeSrcFn: M2 }, mirror: Kt });
  Zt = (e3 = false) => {
    var t3, n3, r3, i3, u3, d3;
    Ut(Wt({ type: We.Meta, data: { href: window.location.href, width: Te(), height: xe() } }), e3), U2.reset(), Qe.forEach((e4) => e4.lock());
    const h3 = function(e4, t4) {
      var n4 = t4 || {}, r4 = n4.mirror, o3 = void 0 === r4 ? new X() : r4, s3 = n4.blockClass, i4 = void 0 === s3 ? "rr-block" : s3, a3 = n4.blockSelector, l3 = void 0 === a3 ? null : a3, c3 = n4.maskTextClass, u4 = void 0 === c3 ? "rr-mask" : c3, d4 = n4.maskTextSelector, h4 = void 0 === d4 ? null : d4, p3 = n4.inlineStylesheet, m3 = void 0 === p3 || p3, g3 = n4.inlineImages, f3 = void 0 !== g3 && g3, I3 = n4.recordCanvas, C3 = void 0 !== I3 && I3, y3 = n4.maskAllInputs, v3 = void 0 !== y3 && y3, b3 = n4.maskTextFn, S3 = n4.maskInputFn, A3 = n4.slimDOM, k3 = void 0 !== A3 && A3, w3 = n4.dataURLOptions, M3 = n4.preserveWhiteSpace, x3 = n4.onSerialize, T3 = n4.onIframeLoad, E3 = n4.iframeLoadTimeout, N3 = n4.onStylesheetLoad, R3 = n4.stylesheetLoadTimeout, F3 = n4.keepIframeSrcFn;
      return ve(e4, { doc: e4, mirror: o3, blockClass: i4, blockSelector: l3, maskTextClass: u4, maskTextSelector: h4, skipChild: false, inlineStylesheet: m3, maskInputOptions: true === v3 ? { color: true, date: true, "datetime-local": true, email: true, month: true, number: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true, textarea: true, select: true, password: true } : false === v3 ? { password: true } : v3, maskTextFn: b3, maskInputFn: S3, slimDOMOptions: true === k3 || "all" === k3 ? { script: true, comment: true, headFavicon: true, headWhitespace: true, headMetaDescKeywords: "all" === k3, headMetaSocial: true, headMetaRobots: true, headMetaHttpEquiv: true, headMetaAuthorship: true, headMetaVerification: true } : false === k3 ? {} : k3, dataURLOptions: w3, inlineImages: f3, recordCanvas: C3, preserveWhiteSpace: M3, onSerialize: x3, onIframeLoad: T3, iframeLoadTimeout: E3, onStylesheetLoad: N3, stylesheetLoadTimeout: R3, keepIframeSrcFn: void 0 === F3 ? function() {
        return false;
      } : F3, newlyAddedElement: false });
    }(document, { mirror: Kt, blockClass: o2, blockSelector: s2, maskTextClass: a2, maskTextSelector: l2, inlineStylesheet: c2, maskAllInputs: N2, maskTextFn: m2, slimDOM: R2, dataURLOptions: C2, recordCanvas: v2, inlineImages: k2, onSerialize: (e4) => {
      Oe(e4, Kt) && Z2.addIframe(e4), Le(e4, Kt) && U2.trackLinkElement(e4), De(e4) && G2.addShadowRoot(e4.shadowRoot, document);
    }, onIframeLoad: (e4, t4) => {
      Z2.attachIframe(e4, t4), G2.observeAttachShadow(e4);
    }, onStylesheetLoad: (e4, t4) => {
      U2.attachLinkElement(e4, t4);
    }, keepIframeSrcFn: M2 });
    if (!h3) return console.warn("Failed to snapshot the document");
    Ut(Wt({ type: We.FullSnapshot, data: { node: h3, initialOffset: { left: void 0 !== window.pageXOffset ? window.pageXOffset : (null === document || void 0 === document ? void 0 : document.documentElement.scrollLeft) || (null === (n3 = null === (t3 = null === document || void 0 === document ? void 0 : document.body) || void 0 === t3 ? void 0 : t3.parentElement) || void 0 === n3 ? void 0 : n3.scrollLeft) || (null === (r3 = null === document || void 0 === document ? void 0 : document.body) || void 0 === r3 ? void 0 : r3.scrollLeft) || 0, top: void 0 !== window.pageYOffset ? window.pageYOffset : (null === document || void 0 === document ? void 0 : document.documentElement.scrollTop) || (null === (u3 = null === (i3 = null === document || void 0 === document ? void 0 : document.body) || void 0 === i3 ? void 0 : i3.parentElement) || void 0 === u3 ? void 0 : u3.scrollTop) || (null === (d3 = null === document || void 0 === document ? void 0 : document.body) || void 0 === d3 ? void 0 : d3.scrollTop) || 0 } } })), Qe.forEach((e4) => e4.unlock()), document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0 && U2.adoptStyleSheets(document.adoptedStyleSheets, Kt.getId(document));
  };
  try {
    const e3 = [];
    e3.push(be("DOMContentLoaded", () => {
      Ut(Wt({ type: We.DomContentLoaded, data: {} }));
    }));
    const t3 = (e4) => {
      var t4;
      return dt({ mutationCb: D2, mousemoveCb: (e5, t5) => Ut(Wt({ type: We.IncrementalSnapshot, data: { source: t5, positions: e5 } })), mouseInteractionCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.MouseInteraction }, e5) })), scrollCb: B2, viewportResizeCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.ViewportResize }, e5) })), inputCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.Input }, e5) })), mediaInteractionCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.MediaInteraction }, e5) })), styleSheetRuleCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.StyleSheetRule }, e5) })), styleDeclarationCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.StyleDeclaration }, e5) })), canvasMutationCb: W2, fontCb: (e5) => Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.Font }, e5) })), selectionCb: (e5) => {
        Ut(Wt({ type: We.IncrementalSnapshot, data: Object.assign({ source: Ue.Selection }, e5) }));
      }, blockClass: o2, ignoreClass: i2, maskTextClass: a2, maskTextSelector: l2, maskInputOptions: N2, inlineStylesheet: c2, sampling: I2, recordCanvas: v2, inlineImages: k2, userTriggeredOnInput: S2, collectFonts: A2, doc: e4, maskInputFn: p2, maskTextFn: m2, keepIframeSrcFn: M2, blockSelector: s2, slimDOMOptions: R2, dataURLOptions: C2, mirror: Kt, iframeManager: Z2, stylesheetManager: U2, shadowDomManager: G2, canvasManager: Gt, ignoreCSSAttributes: x2, plugins: (null === (t4 = null == w2 ? void 0 : w2.filter((e5) => e5.observer)) || void 0 === t4 ? void 0 : t4.map((e5) => ({ observer: e5.observer, options: e5.options, callback: (t5) => Ut(Wt({ type: We.Plugin, data: { plugin: e5.name, payload: t5 } })) }))) || [] }, g2);
    };
    Z2.addLoadListener((n4) => {
      e3.push(t3(n4.contentDocument));
    });
    const n3 = () => {
      Zt(), e3.push(t3(document)), Vt = true;
    };
    return "interactive" === document.readyState || "complete" === document.readyState ? n3() : e3.push(be("load", () => {
      Ut(Wt({ type: We.Load, data: {} })), n3();
    }, window)), () => {
      e3.forEach((e4) => e4()), Vt = false;
    };
  } catch (e3) {
    console.warn(e3);
  }
}
_t.addCustomEvent = (e2, t2) => {
  if (!Vt) throw new Error("please add custom event after start recording");
  Ut(Wt({ type: We.Custom, data: { tag: e2, payload: t2 } }));
}, _t.freezePage = () => {
  Qe.forEach((e2) => e2.freeze());
}, _t.takeFullSnapshot = (e2) => {
  if (!Vt) throw new Error("please take full snapshot after start recording");
  Zt(e2);
}, _t.mirror = Kt;
var Pt = class {
  constructor(e2) {
    this.buffer = [], this.index = 0, this.visibilityHandler = () => {
      this.handleVisibilityChange();
    }, document.addEventListener("visibilitychange", this.visibilityHandler, true), this.timerHandle = setInterval(() => {
      2 !== this.buffer.length && (this.recordCapture(), this.restartCapture());
    }, e2.intervalMs), this.startCapture();
  }
  register(e2, t2) {
    this.telemetry = e2, this.sessionId = t2;
  }
  unregister() {
    var e2;
    null === (e2 = this.stopper) || void 0 === e2 || e2.call(this), this.telemetry = void 0, document.removeEventListener("visibilitychange", this.visibilityHandler), clearInterval(this.timerHandle);
  }
  handleVisibilityChange() {
    "hidden" === document.visibilityState && (this.recordCapture(), this.restartCapture());
  }
  recordCapture() {
    this.telemetry && this.sessionId && this.telemetry.captureSession({ id: this.sessionId, events: [...this.buffer], index: this.index }), this.index += 1;
  }
  startCapture() {
    const { buffer: e2 } = this;
    this.stopper = _t({ emit: (t2) => {
      e2.push(t2);
    } });
  }
  restartCapture() {
    var e2;
    null === (e2 = this.stopper) || void 0 === e2 || e2.call(this), this.buffer.length = 0, this.startCapture();
  }
};
var Yt = class {
  constructor(e2) {
    this.content = [], this.size = e2;
  }
  push(e2) {
    this.content.length < this.size && this.content.push(e2);
  }
  hasSpace() {
    return this.content.length < this.size;
  }
  isPopulated() {
    return 0 !== this.content.length;
  }
  clear() {
    this.content = [];
  }
};
var zt = class {
  constructor(e2, t2) {
    this.buffers = [], this.writePointer = 0, this.headPointer = 0;
    for (let n2 = 0; n2 < t2; n2 += 1) this.buffers.push(new Yt(e2));
  }
  push(e2) {
    const t2 = this.buffers[this.writePointer];
    if (!t2.hasSpace()) return this.writePointer < this.buffers.length - 1 ? this.writePointer += 1 : this.writePointer = 0, this.buffers[this.writePointer].clear(), this.writePointer === this.headPointer && (this.headPointer += 1, this.headPointer >= this.buffers.length - 1 && (this.headPointer = 0)), void this.push(e2);
    t2.push(e2);
  }
  toArray() {
    const e2 = [], t2 = this.buffers.reduce((e3, t3) => t3.isPopulated() ? e3 + 1 : e3, 0);
    for (let n2 = this.headPointer; n2 < this.headPointer + t2; n2 += 1) {
      const t3 = n2 % this.buffers.length;
      e2.push(...this.buffers[t3].content);
    }
    return e2;
  }
  reset() {
    this.writePointer = 0, this.headPointer = 0, this.buffers.forEach((e2) => e2.clear());
  }
};
var jt = class {
  constructor(e2) {
    this.options = e2, this.index = 0, this.buffer = new zt(e2.eventSegmentLength, e2.segmentBufferLength), this.startCapture();
  }
  startCapture() {
    this.stopper = _t({ checkoutEveryNth: this.options.eventSegmentLength, emit: (e2) => {
      this.buffer.push(e2);
    } });
  }
  register(e2, t2) {
    this.telemetry = e2, this.sessionId = t2;
  }
  unregister() {
    var e2;
    null === (e2 = this.stopper) || void 0 === e2 || e2.call(this), this.telemetry = void 0;
  }
  capture() {
    var e2;
    this.telemetry && this.sessionId && (null === (e2 = this.telemetry) || void 0 === e2 || e2.captureSession({ id: this.sessionId, events: this.buffer.toArray(), index: this.index })), this.index += 1, this.restartCapture();
  }
  restartCapture() {
    var e2;
    this.buffer.reset(), null === (e2 = this.stopper) || void 0 === e2 || e2.call(this), this.startCapture();
  }
};
var Jt = class {
  constructor(e2) {
    const t2 = null == e2 ? void 0 : e2.capture;
    var n2;
    "continuous" === (null == (n2 = t2) ? void 0 : n2.type) ? this.impl = new Pt(t2) : !function(e3) {
      return "rolling" === (null == e3 ? void 0 : e3.type);
    }(t2) ? this.impl = new Pt({ type: "continuous", intervalMs: 5e3 }) : this.impl = new jt(t2);
  }
  register(e2, t2) {
    this.impl.register(e2, t2);
  }
  unregister() {
    this.impl.unregister();
  }
  handleFlagUsed(e2, t2, n2) {
    _t.addCustomEvent("flag-used", { key: e2, detail: t2 });
  }
  handleFlagDetailChanged(e2, t2) {
    _t.addCustomEvent("flag-detail-changed", { key: e2, detail: t2 });
  }
  handleErrorEvent(e2, t2) {
    _t.addCustomEvent("error", { name: e2, message: t2 });
  }
};
function Ht(e2, t2) {
  return null != e2 ? e2 : t2;
}
function Qt(e2, t2) {
  if (false === e2) return { instrumentFetch: false, instrumentXhr: false };
  const n2 = (null == e2 ? void 0 : e2.customUrlFilter) && "function" == typeof (null == e2 ? void 0 : e2.customUrlFilter) ? e2.customUrlFilter : void 0;
  return { instrumentFetch: Ht(null == e2 ? void 0 : e2.instrumentFetch, t2.instrumentFetch), instrumentXhr: Ht(null == e2 ? void 0 : e2.instrumentFetch, t2.instrumentXhr), customUrlFilter: n2 };
}
function Xt(e2, t2) {
  var n2, r2, o2;
  return { source: { beforeLines: Ht(null === (n2 = null == e2 ? void 0 : e2.source) || void 0 === n2 ? void 0 : n2.beforeLines, t2.source.beforeLines), afterLines: Ht(null === (r2 = null == e2 ? void 0 : e2.source) || void 0 === r2 ? void 0 : r2.afterLines, t2.source.afterLines), maxLineLength: Ht(null === (o2 = null == e2 ? void 0 : e2.source) || void 0 === o2 ? void 0 : o2.maxLineLength, t2.source.maxLineLength) } };
}
function qt(e2) {
  const t2 = function(e3) {
    var t3, n2, r2, o2, s2, i2;
    const a2 = { breadcrumbs: { maxBreadcrumbs: 50, evaluations: true, flagChange: true, click: true, keyboardInput: true, http: { instrumentFetch: true, instrumentXhr: true } }, stack: { source: { beforeLines: 3, afterLines: 3, maxLineLength: 280 } }, maxPendingEvents: 100, collectors: [] };
    return { breadcrumbs: { maxBreadcrumbs: Ht(null === (t3 = e3.breadcrumbs) || void 0 === t3 ? void 0 : t3.maxBreadcrumbs, a2.breadcrumbs.maxBreadcrumbs), evaluations: Ht(null === (n2 = e3.breadcrumbs) || void 0 === n2 ? void 0 : n2.evaluations, a2.breadcrumbs.evaluations), flagChange: Ht(null === (r2 = e3.breadcrumbs) || void 0 === r2 ? void 0 : r2.flagChange, a2.breadcrumbs.flagChange), click: Ht(null === (o2 = e3.breadcrumbs) || void 0 === o2 ? void 0 : o2.click, a2.breadcrumbs.click), keyboardInput: Ht(null === (s2 = e3.breadcrumbs) || void 0 === s2 ? void 0 : s2.keyboardInput, a2.breadcrumbs.keyboardInput), http: Qt(null === (i2 = e3.breadcrumbs) || void 0 === i2 ? void 0 : i2.http, a2.breadcrumbs.http) }, stack: Xt(e3.stack, a2.stack), maxPendingEvents: Ht(e3.maxPendingEvents, a2.maxPendingEvents), collectors: [...Ht(e3.collectors, a2.collectors)] };
  }(e2 || {});
  return new Y(t2);
}
export {
  Jt as SessionReplay,
  qt as initializeTelemetry
};
/*! Bundled license information:

@launchdarkly/browser-telemetry/dist/esm/bundle.es.js:
  (**
   * https://github.com/csnover/TraceKit
   * @license MIT
   * @namespace TraceKit
   *)
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=@launchdarkly_browser-telemetry.js.map
